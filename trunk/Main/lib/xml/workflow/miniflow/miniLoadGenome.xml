<workflowGraph name="loadGenome">
      <param name="parentDataDir"/>
      <param name="organismName"/>
      <param name="genomeExtDbRlsSpec"/>
      <param name="ncbiTaxonId"/>
      <param name="projectName"/>

    <constant name="dataDir">$$parentDataDir$$/$$organismName$$LoadGenome</constant>
    <constant name="genomicSeqsFileForSsa">$$dataDir$$/genomicSeqsForSsa.fsa</constant>
    <constant name="transcriptSeqsFileForSsa">$$dataDir$$/transcriptSeqsForSsa.fsa</constant>
    <constant name="geneModelFileForSsa">$$dataDir$$/geneModelForSsa.txt</constant>
     <constant name="samHeaderFile">$$dataDir$$/samHeader</constant>

    <step name="makeDataDir" stepClass="ReFlow::StepClasses::MakeDataDir">
      <paramValue name="dataDir">$$dataDir$$</paramValue>
    </step>

  <step name="insertOrganismProject"
          stepClass="ApiCommonWorkflow::Main::WorkflowSteps::InsertOrganismProject">
      <paramValue name="organism">$$organismName$$</paramValue>
      <paramValue name="project">$$projectName$$</paramValue>
    </step>

  <step name="extractGenomicSeqsForSsa"
          stepClass="ApiCommonWorkflow::Main::WorkflowSteps::ExtractNaSeqsForSsa">
      <paramValue name="ncbiTaxonId">$$ncbiTaxonId$$</paramValue>
      <paramValue name="outputFile">$$genomicSeqsFileForSsa$$</paramValue>
      <depends name="makeDataDir"/>
    </step>

  <step name="extractTranscriptSeqsForSsa"
          stepClass="ApiCommonWorkflow::Main::WorkflowSteps::ExtractTranscriptSeqsForSsa">
      <paramValue name="ncbiTaxonId">$$ncbiTaxonId$$</paramValue>
      <paramValue name="outputFile">$$transcriptSeqsFileForSsa$$</paramValue>
      <depends name="makeDataDir"/>
    </step>

  <step name="extractGeneModelForSsa"
          stepClass="ApiCommonWorkflow::Main::WorkflowSteps::ExtractGeneModelForSsa">
      <paramValue name="ncbiTaxonId">$$ncbiTaxonId$$</paramValue>
      <paramValue name="outputFile">$$geneModelFileForSsa$$</paramValue>
      <depends name="makeDataDir"/>
    </step>

  <step name="mirrorToCluster" stepClass="ReFlow::StepClasses::MirrorToComputeCluster">
      <paramValue name="fileOrDirToMirror">$$dataDir$$</paramValue>
      <depends name="extractGenomicSeqsForSsa"/>
      <depends name="extractTranscriptSeqsForSsa"/>
      <depends name="extractGeneModelForSsa"/>
    </step>

</workflowGraph>
