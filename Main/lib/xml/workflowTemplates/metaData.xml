<workflowGraph name="metaData">
    <param name="parentDataDir"/>
    <param name="datasetLoaderXmlFileName"/>

    <constant name="dataDir">$$parentDataDir$$/metaData</constant>
    
    <step name="makeDataDir" stepClass="ReFlow::StepClasses::MakeDataDir">
      <paramValue name="dataDir">$$dataDir$$</paramValue>
    </step>
    
    <datasetTemplate class="htsSnpMetaData">
      <prop name="organismAbbrev"/>
      <prop name="experimentName"/>
      <prop name="experimentVersion"/>

      <subgraph name="${experimentName}_HTS_SNP_insertMetaData" xmlFile="loadSampleMetaData.xml">
        <paramValue name="organismAbbrev">${organismAbbrev}</paramValue>
        <paramValue name="parentDataDir">$$dataDir$$</paramValue>
        <paramValue name="experimentName">${experimentName}</paramValue>
        <paramValue name="readsFile"></paramValue>
        <paramValue name="sampleExtDbRlsSpecTemplate">${organismAbbrev}_${experimentName}_SNP_SAMPLE_NAME@_HTS_SNPSample_RSRC|dontcare</paramValue>
        <paramValue name="studyExtDbRlsSpec">${organismAbbrev}_HTS_SNP_${experimentName}_RSRC|${experimentVersion}</paramValue>
        <paramValue name="isProfile"></paramValue>
        <paramValue name="dataType">HTS_SNP</paramValue>
        <paramValue name="datasetLoaderXmlFileName">$$datasetLoaderXmlFileName$$</paramValue>
        <depends name="makeDataDir"/>
      </subgraph>
    </datasetTemplate> 
    
    <datasetTemplate class="proteinMicroarrayMetaData">
      <prop name="organismAbbrev"/>
      <prop name="experimentName"/>
      <prop name="experimentVersion"/>
      <subgraph name="${experimentName}_microarrayAntibody_insertMetaData" xmlFile="loadSampleMetaData.xml">
        <paramValue name="organismAbbrev">${organismAbbrev}</paramValue>
        <paramValue name="parentDataDir">$$dataDir$$</paramValue>
        <paramValue name="experimentName">${experimentName}</paramValue>
        <paramValue name="readsFile"></paramValue>
        <paramValue name="sampleExtDbRlsSpecTemplate"></paramValue>
        <paramValue name="studyExtDbRlsSpec">${organismAbbrev}_microarrayAntibody_${experimentName}_RSRC|${experimentVersion}</paramValue>
        <paramValue name="isProfile">true</paramValue>
        <paramValue name="dataType">microarrayAntibody</paramValue>
        <paramValue name="datasetLoaderXmlFileName">$$datasetLoaderXmlFileName$$</paramValue>
        <depends name="makeDataDir"/>
      </subgraph>
    </datasetTemplate> 
    
</workflowGraph>
