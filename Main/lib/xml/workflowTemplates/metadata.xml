 <workflowGraph name="">
  <param name="parentDataDir"/>
  <param name="datasetLoaderXmlFileName"/>

  <constant name="dataDir">$$parentDataDir$$/metadata</constant>

  <step name="makeDataDir" stepClass="ReFlow::StepClasses::MakeDataDir">
    <paramValue name="dataDir">$$dataDir$$</paramValue>
  </step>

 
<datasetTemplate class="customOntologyEntries">
    <prop name="name"/>
    <prop name="organismAbbrev"/>
    <subgraph name="custom_ontology_RSRC" xmlFile="loadDataset.xml">
      <paramValue name="datasetName">Custom_Ontology_RSRC</paramValue>
      <paramValue name="datasetLoaderXmlFileName">$$datasetLoaderXmlFileName$$</paramValue>
      <paramValue name="parentDataDir"></paramValue>
    </subgraph>
  </datasetTemplate>


  <datasetTemplate class="proteinMicroarrayMetaData">
    <prop name="organismAbbrev"/>
    <prop name="experimentName"/>
    <prop name="experimentVersion"/>

      <subgraph name="${experimentName}_microarrayAntibody_insertMetaData" xmlFile="loadSampleMetaData.xml">
        <paramValue name="organismAbbrev">${organismAbbrev}</paramValue>
        <paramValue name="parentDataDir"></paramValue>
        <paramValue name="experimentName">${experimentName}</paramValue>
        <paramValue name="readsFile"></paramValue>
        <paramValue name="sampleExtDbRlsSpecTemplate"></paramValue>
        <paramValue name="studyExtDbRlsSpec">${organismAbbrev}_microarrayAntibody_${experimentName}_RSRC|${experimentVersion}</paramValue>
        <paramValue name="dataType">immuneResponse</paramValue>
        <paramValue name="datasetLoaderXmlFileName">$$datasetLoaderXmlFileName$$</paramValue>
        <depends name="custom_ontology_RSRC"/>
      </subgraph>

  </datasetTemplate>

  <datasetTemplate class="massSpecMetaData">
    <prop name="organismAbbrev"/>
    <prop name="experimentName"/>
    <prop name="experimentVersion"/>

      <subgraph name="${experimentName}_massSpec_insertMetaData" xmlFile="loadSampleMetaData.xml">
        <paramValue name="organismAbbrev">${organismAbbrev}</paramValue>
        <paramValue name="parentDataDir"></paramValue>
        <paramValue name="experimentName">${experimentName}</paramValue>
        <paramValue name="readsFile"></paramValue>
        <paramValue name="sampleExtDbRlsSpecTemplate"></paramValue>
        <paramValue name="studyExtDbRlsSpec">${organismAbbrev}_massSpec_${experimentName}_RSRC|${experimentVersion}</paramValue>
        <paramValue name="dataType">massSpec</paramValue>
        <paramValue name="datasetLoaderXmlFileName">$$datasetLoaderXmlFileName$$</paramValue>
        <depends name="custom_ontology_RSRC"/>
      </subgraph>
  </datasetTemplate>

  <datasetTemplate class="SnpMetaData">
    <prop name="organismAbbrev"/>
    <prop name="experimentName"/>
    <prop name="experimentVersion"/>

      <subgraph name="${experimentName}_SNP_insertMetaData" xmlFile="loadSampleMetaData.xml">
        <paramValue name="organismAbbrev">${organismAbbrev}</paramValue>
        <paramValue name="parentDataDir"></paramValue>
        <paramValue name="experimentName">${experimentName}</paramValue>
        <paramValue name="readsFile"></paramValue>
        <paramValue name="sampleExtDbRlsSpecTemplate">${organismAbbrev}_${experimentName}_@SAMPLE_NAME@_HTS_SNPSample_RSRC</paramValue>
        <paramValue name="studyExtDbRlsSpec">${organismAbbrev}_SNP_${experimentName}_RSRC|${experimentVersion}</paramValue>
        <paramValue name="dataType">SNP</paramValue>
        <paramValue name="datasetLoaderXmlFileName">$$datasetLoaderXmlFileName$$</paramValue>
        <depends name="custom_ontology_RSRC"/>
      </subgraph>
  </datasetTemplate>

  <datasetTemplate class="SNPChipMetaData">
    <prop name="organismAbbrev"/>
    <prop name="experimentName"/>
    <prop name="experimentVersion"/>

      <subgraph name="${experimentName}_SNPChip_insertMetaData" xmlFile="loadSampleMetaData.xml">
        <paramValue name="organismAbbrev">${organismAbbrev}</paramValue>
        <paramValue name="parentDataDir"></paramValue>
        <paramValue name="experimentName">${experimentName}</paramValue>
        <paramValue name="readsFile"></paramValue>
        <paramValue name="sampleExtDbRlsSpecTemplate">${organismAbbrev}_${experimentName}_@SAMPLE_NAME@_SNPChipSample_RSRC</paramValue>
        <paramValue name="studyExtDbRlsSpec">${organismAbbrev}_SNP_${experimentName}_RSRC|${experimentVersion}</paramValue>
        <paramValue name="dataType">SNP</paramValue>
        <paramValue name="datasetLoaderXmlFileName">$$datasetLoaderXmlFileName$$</paramValue>
        <depends name="custom_ontology_RSRC"/>
      </subgraph>
  </datasetTemplate>

  <datasetTemplate class="chipChipMetaData">
    <prop name="organismAbbrev"/>
    <prop name="experimentName"/>
    <prop name="experimentVersion"/>

      <subgraph name="${experimentName}_ChipChip_insertMetaData" xmlFile="loadSampleMetaData.xml">
        <paramValue name="organismAbbrev">${organismAbbrev}</paramValue>
        <paramValue name="parentDataDir"></paramValue>
        <paramValue name="experimentName">${experimentName}</paramValue>
        <paramValue name="readsFile"></paramValue>
        <paramValue name="sampleExtDbRlsSpecTemplate">${organismAbbrev}_${experimentName}_@SAMPLE_NAME@_chipChipSample_RSRC</paramValue>
        <paramValue name="studyExtDbRlsSpec">${organismAbbrev}_ChipChip_${experimentName}_RSRC|${experimentVersion}</paramValue>
        <paramValue name="dataType">chip-chip</paramValue>
        <paramValue name="datasetLoaderXmlFileName">$$datasetLoaderXmlFileName$$</paramValue>
        <depends name="custom_ontology_RSRC"/>
      </subgraph>
  </datasetTemplate>



</workflowGraph>
