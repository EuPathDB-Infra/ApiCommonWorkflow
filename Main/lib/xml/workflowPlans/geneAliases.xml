<workflowGraph name="">
  <param name="organismAbbrev"/>
  <param name="organismResourceXmlFile"/>
  <param name="parentDataDir"/>
  <param name="projectVersionForWebsiteFiles"/>
  <param name="projectName"/>
  <param name="relativeDownloadSiteDir"/>
  <param name="genomeExtDbRlsSpec"/>

  <constant name="dataDir">$$parentDataDir$$/geneAliases</constant>
  <constant name="geneAliasDescripString">Current, old, and alternative gene ids</constant>


  <step name="makeDataDir" stepClass="ReFlow::StepClasses::MakeDataDir">
    <paramValue name="dataDir">$$dataDir$$</paramValue>
  </step>

  <datasetTemplate class="geneAliases">
    <prop name="organismAbbrev"/>
    <prop name="version"/>
    <prop name="name"/>
    <subgraph name="${name}_gene_aliases_RSRC" xmlFile="loadResource.xml">
      <paramValue name="resourceName">${organismAbbrev}_${name}_gene_aliases_RSRC</paramValue>
      <paramValue name="resourceXmlFileName">$$organismResourceXmlFile$$</paramValue>
      <paramValue name="parentDataDir">$$dataDir$$</paramValue>
      <depends name="makeDataDir"/>
    </subgraph>
  </datasetTemplate>

  <step name="makeDerivedGeneIdTable"
          stepClass="ApiCommonWorkflow::Main::WorkflowSteps::MakeDerivedGeneIdTable" stepLoadTypes="tuningManager">
      <paramValue name="tables">GeneId</paramValue>
      <paramValue name="organismAbbrev">$$organismAbbrev$$</paramValue>
      <dependsPattern name="%_gene_aliases_RSRC"/> 
  </step>


    <step name="makeGeneAliasesDownloadFile" stepClass="ApiCommonWorkflow::Main::WorkflowSteps::MakeGeneAliasesDownloadFile">
      <paramValue name="organismAbbrev">${organismAbbrev}</paramValue>
      <paramValue name="projectVersionForWebsiteFiles">$$projectVersionForWebsiteFiles$$</paramValue>
      <paramValue name="projectName">$$projectName$$</paramValue>
      <paramValue name="relativeDir">$$relativeDownloadSiteDir$$</paramValue>
      <paramValue name="fileType">txt</paramValue>
      <paramValue name="dataName">GeneAliases</paramValue>
      <paramValue name="descripString">$$geneAliasDescripString$$</paramValue>
      <paramValue name="genomeExtDbRlsSpec">$$genomeExtDbRlsSpec$$</paramValue>
      <paramValue name="dbRefNAFeatureExtDbSpec"></paramValue>
      <paramValue name="isWebServiceFile">false</paramValue>
      <depends name="makeDerivedGeneIdTable"/>
    </step>

</workflowGraph>

