<workflowGraph name="plasmoWorkflow">
  <param name="projectName"/>
  <param name="projectVersion"/>

  <constant name="comparativeGenomicsFastaDir">common/comparativeGenomics/Fasta/</constant>
  <constant name="comparativeGenomicsGffDir">common/comparativeGenomics/Gff/</constant>
  <constant name="webServicesDataDir">webServices/$$projectName$$/release-$$projectVersion$$/</constant>
  <constant name="downloadSiteDir">@@downloadSite@@/$$projectName$$/release-$$projectVersion$$/</constant>

  <globalSubgraph name="global" xmlFile="globalGraph.xml">
    <paramValue name="commonResourceXmlFile">$$project$$/$$project$$Common.xml</paramValue>
    <paramValue name="globalResourceXmlFile">globalResources.xml</paramValue>
  </globalSubgraph>

  <subgraph name="common" xmlFile="common.xml">
    <paramValue name="projectName">$$projectName$$</paramValue>
    <paramValue name="projectVersion">$$projectVersion$$</paramValue>
    <paramValue name="comparativeGenomicsFastaDir">$$comparativeGenomicsFastaDir$$</paramValue>
    <paramValue name="comparativeGenomicsGffDir">$$comparativeGenomicsGffDir$$</paramValue>
    <paramValue name="webServicesDataDir">$$webServicesDataDir$$</paramValue>
  </subgraph>

  <datasetTemplate class="organism">
    <prop name="ncbiTaxonId"/>
    <prop name="organismAbbrev"/>
    <prop name="publicOrganismAbbrev"/>
    <prop name="organismFullName"/>
    <prop name="organismNameForFiles"/>
    <prop name="ncbiTaxonId"/>
    <prop name="speciesNcbiTaxonId"/>
    <prop name="isReferenceStrain"/>
    <prop name="isDraftGenome"/>
    <prop name="orthomclAbbrev"/>
    <prop name="strainAbbrev"/>
    <prop name="extractProteins"/>
    <prop name="hasOrganelleSeq"/>
    <prop name="organelleInitDownloadDirSubgraph"/>
    <prop name="genomeExtDbRlsSpec"/>
    <prop name="genomeVirtualSeqsExtDbRlsSpec"/>
    <prop name="insertVirtualSeqFromAgpFileResourceName"/>
    <prop name="insertVirtualSeqFromAgpFile"/>
    <prop name="repeatMaskSpecies"/>
    <prop name="twoLetterAbbrev"/>
    <prop name="organismAbbrev"/>
    <prop name="loadDbest"/>
    <prop name="usePredictedTranscripts"/>
    <prop name="predictedTranscriptsExtDbRlsSpec"/>
    <prop name="runtRNAScan"/>
    <prop name="runExportPred"/>
    <prop name="maxIntronSize"/>
    <prop name="taxonHierarchyForBlastxFilter"/>
    <prop name="genomeSize"/>
    <prop name="skipProteomeAnalysis"/>
    <prop name="skipGenomeAnalysis"/>
    <prop name="loadEpitope"/>
    <prop name="makeAssemblySeqs"/>
    <prop name="makeAssemblies"/>
    <prop name="mapAssemblySeqsAndAssemblies"/>
    <prop name="loadOrganismSpecificESTResource"/>
    <prop name="loadOrganismSpecificMassSpecResource"/>
    <prop name="loadProductName"/>
    <prop name="distanceBetweenStartsForAlignmentsInSameCluster"/>
    <prop name="minOrfLength"/>
    <prop name="deprecated"/>
    <prop name="soTermIdsOrNames"/>
    <prop name="makeESTDownloadFile"/>
    <prop name="makeProteomeDownloadFile"/>
    <prop name="makeGenomicDownloadFile"/>
    <prop name="hasMito"/>
    <prop name="hasPlastid"/>

    <subgraph name="&&organismAbbrev&&_LoadGenome" xmlFile="loadGenome.xml">
      <paramValue name="parentDataDir"></paramValue>
      <paramValue name="organismAbbrev">&&organismAbbrev&&</paramValue>
      <paramValue name="organismFullName">&&organismFullName&&</paramValue>
      <paramValue name="organismNameForFiles">&&organismNameForFiles&&</paramValue>
      <paramValue name="publicOrganismAbbrev">&&publicOrganismAbbrev&&</paramValue>
      <paramValue name="ncbiTaxonId">&&ncbiTaxonId&&</paramValue>
      <paramValue name="speciesNcbiTaxonId">&&speciesNcbiTaxonId&&</paramValue>
      <paramValue name="isReferenceStrain">&&isReferenceStrain&&</paramValue>
      <paramValue name="isDraftGenome">&&isDraftGenome&&</paramValue>
      <paramValue name="orthomclAbbrev">&&orthomclAbbrev&&</paramValue>
      <paramValue name="strainAbbrev">&&strainAbbrev&&</paramValue>
      <paramValue name="genomeExtDbRlsSpec">&&genomeExtDbRlsSpec&&</paramValue>
      <paramValue name="organismResourceXmlFile">$$projectName$$/&&organismAbbrev&&.xml</paramValue>
      <paramValue name="downloadSiteDir">$$downloadSiteDir$$</paramValue>
      <paramValue name="extractProteins">&&extractProteins&&</paramValue>
      <paramValue name="projectName">$$projectName$$</paramValue>
      <paramValue name="projectVersion">$$projectVersion$$</paramValue>
      <paramValue name="haveOrganelleGenomeSequence">&&hasOrganelleSeq&&</paramValue>
      <paramValue name="organelleInitDownloadDirSubgraph">&&organelleInitDownloadDirSubgraph&&</paramValue>
      <depends name="common"/>
      <dependsGlobal name="taxonomy_RSRC"/> 
      <dependsGlobal name="SO_RSRC"/>
    </subgraph>

    <subgraph name="&&organismAbbrev&&_MakeAndMaskTopLevelGenome" xmlFile="makeAndMaskTopLevelGenome.xml">
      <paramValue name="parentDataDir"></paramValue>
      <paramValue name="organismAbbrev">&&organismAbbrev&&</paramValue>
      <paramValue name="organismFullName">&&organismFullName&&</paramValue>
      <paramValue name="genomeExtDbRlsSpec">&&genomeExtDbRlsSpec&&</paramValue>
      <paramValue name="genomeVirtualSeqsExtDbRlsSpec">&&genomeVirtualSeqsExtDbRlsSpec&&</paramValue>
      <paramValue name="insertVirtualSeqFromAgpFileResourceName">&&insertVirtualSeqFromAgpFileResourceName&&</paramValue>
      <paramValue name="insertVirtualSeqFromAgpFile">&&insertVirtualSeqFromAgpFile&&</paramValue>
      <paramValue name="repeatMaskSpecies">-species &&repeatMaskSpecies&&</paramValue>
      <paramValue name="organismResourceXmlFile">&&projectName&&/&&organismAbbrev&&.xml</paramValue>
      <paramValue name="comparativeGenomicsFastaDir">$$comparativeGenomicsFastaDir$$</paramValue>
      <paramValue name="comparativeGenomicsGffDir">$$comparativeGenomicsGffDir$$</paramValue>
      <depends name="&&organismAbbrev&&_LoadGenome"/>
    </subgraph>

    <subgraph name="&&organismAbbrev&&_PostLoadGenome" xmlFile="postLoadGenome.xml">
      <paramValue name="parentDataDir"></paramValue>
      <paramValue name="organismFullName">&&organismFullName&&</paramValue>
      <paramValue name="organismAbbrev">&&organismAbbrev&&</paramValue>
      <paramValue name="genomeExtDbRlsSpec">&&genomeExtDbRlsSpec&&</paramValue>
      <paramValue name="loadDbest">&&loadDbest&&</paramValue>
      <paramValue name="ncbiTaxonId">&&ncbiTaxonId&&</paramValue>
      <paramValue name="usePredictedTranscripts">&&usePredictedTranscripts&&</paramValue>
      <paramValue name="predictedTranscriptsExtDbRlsSpec">&&predictedTranscriptsExtDbRlsSpec&&</paramValue>
      <paramValue name="runtRNAScan">&&runtRNAScan&&</paramValue>
      <paramValue name="runExportPred">&&runExportPred&&</paramValue>
      <paramValue name="maxIntronSize">&&maxIntronSize&&</paramValue>
      <paramValue name="taxonHierarchyForBlastxFilter">&&taxonHierarchyForBlastxFilter&&</paramValue>
      <paramValue name="repeatMaskSpecies">-species &&repeatMaskSpecies&&</paramValue>
      <paramValue name="genomeSize">&&genomeSize&&</paramValue>
      <paramValue name="skipProteomeAnalysis">&&skipProteomeAnalysis&&</paramValue>
      <paramValue name="skipGenomeAnalysis">&&skipGenomeAnalysis&&</paramValue>
      <paramValue name="loadEpitope">&&loadEpitope&&</paramValue>
      <paramValue name="makeAssemblySeqs">&&makeAssemblySeqs&&</paramValue>
      <paramValue name="makeAssemblies">&&makeAssemblies&&</paramValue>
      <paramValue name="mapAssemblySeqsAndAssemblies">&&mapAssemblySeqsAndAssemblies&&</paramValue>
      <paramValue name="loadOrganismSpecificESTResource">&&loadOrganismSpecificESTResource&&</paramValue>
      <paramValue name="loadOrganismSpecificMassSpecResource">&&loadOrganismSpecificMassSpecResource&&</paramValue>
      <paramValue name="distanceBetweenStartsForAlignmentsInSameCluster">&&distanceBetweenStartsForAlignmentsInSameCluster&&</paramValue>
      <paramValue name="organismSpecificESTResourcesReference">$$projectName$$/&&organismAbbrev&&/ESTs.xml</paramValue>
      <paramValue name="organismSpecificMassSpecResourcesReference">$$projectName$$/&&organismAbbrev&&/massSpec.xml</paramValue>
      <paramValue name="organismSpecificProductNameResourcesReference">$$projectName$$/&&organismAbbrev&&/productNames.xml</paramValue>
      <paramValue name="organismResourceXmlFile">&&projectName&&/&&organismAbbrev&&.xml</paramValue>
      <depends name="&&organismAbbrev&&_LoadGenome"/>
    </subgraph>

    <subgraph name="&&organismAbbrev&&_Optional" xmlFile="&&projectName&&/&&organismAbbrev&&/optional.xml">
      <paramValue name="parentDataDir"></paramValue>
      <paramValue name="organismResourceXmlFile">&&projectName&&/&&organismAbbrev&&.xml</paramValue>
      <paramValue name="downloadSiteDataDir">@@downloadSiteDir@@/$$projectName$$/release-$$projectVersion$$</paramValue>
      <depends name="&&organismAbbrev&&_LoadGenome"/>
    </subgraph>

    <subgraph name="&&organismAbbrev&&_LoadGeneAliases" xmlFile="loadGeneAliases.xml">
      <paramValue name="parentDataDir"></paramValue>
      <paramValue name="projectName">$$projectName$$</paramValue>
      <paramValue name="organismAbbrev">&&organismAbbrev&&</paramValue>
      <paramValue name="organismResourceXmlFile">&&projectName&&/&&organismAbbrev&&.xml</paramValue>
      <depends name="&&organismAbbrev&&_LoadGenome"/>
    </subgraph>

    <subgraph name="&&organismAbbrev&&_LoadDbxRefs" xmlFile="loadDbxRefs.xml">
      <paramValue name="projectName">$$projectName$$</paramValue>
      <paramValue name="projectVersion">$$projectVersion$$</paramValue>
      <paramValue name="parentDataDir"></paramValue>
      <paramValue name="downloadSiteDataDir">@@downloadSiteDir@@/$$projectName$$/release-$$projectVersion$$</paramValue>
      <paramValue name="organismAbbrev">&&organismAbbrev&&</paramValue>
      <paramValue name="organismSpecificDbxRefsReference">&&projectName&&/&&organismAbbrev&&/dbXRefs.xml</paramValue>
      <paramValue name="organismResourceXmlFile">&&projectName&&/&&organismAbbrev&&.xml</paramValue>
      <depends name="&&organismAbbrev&&_LoadGeneAliases"/>
    </subgraph>

    <subgraph name="&&organismAbbrev&&_MakeAndFormatDownloadFiles" xmlFile="makeAndFormatDownloadFiles.xml">
      <paramValue name="downloadSiteDataDir">@@downloadSiteDir@@/$$projectName$$/release-$$projectVersion$$</paramValue>
      <paramValue name="organismNameForFiles">&&organismNameForFiles&&</paramValue>
      <paramValue name="ncbiTaxonId">&&ncbiTaxonId&&</paramValue>
      <paramValue name="parentNcbiTaxonId">&&parentNcbiTaxonId&&</paramValue>
      <paramValue name="genomeSource">@@&&NAME&&GenomeSource@@</paramValue>
      <paramValue name="projectName">$$projectName$$</paramValue>
      <paramValue name="projectVersion">$$projectVersion$$</paramValue>
      <paramValue name="dbESTExtDbRlsSpec">&&NAME&&_dbEST_RSRC|@@&&NAME&&_dbEST_VER@@</paramValue>
      <paramValue name="webServicesDataDir">@@webServicesDir@@/$$projectName$$/release-$$projectVersion$$/</paramValue>
      <paramValue name="genomeExtDbRlsSpec">&&genomeExtDbRlsSpec&&</paramValue>
      <paramValue name="genomeVirtualSeqsExtDbRlsSpec">&&genomeVirtualSeqsExtDbRlsSpec&&</paramValue>
      <paramValue name="minOrfLength">50</paramValue>
      <paramValue name="deprecated">&&deprecated&&</paramValue>
      <paramValue name="soTermIdsOrNames">&&soTermIdsOrNames&&</paramValue>
      <paramValue name="makeESTDownloadFile">&&makeESTDownloadFile&&</paramValue>
      <paramValue name="makeProteomeDownloadFile">&&makeProteomeDownloadFile&&</paramValue>
      <paramValue name="makeGenomicDownloadFile">&&makeGenomicDownloadFile&&</paramValue>
      <depends name="&&organismAbbrev&&_PostLoadGenome"/>
      <depends name="&&organismAbbrev&&_MakeAndMaskTopLevelGenome"/>
    </subgraph>
  </datasetTemplate>


  <subgraph name="ComparativeGenomics" xmlFile="comparativeGenomics.xml">
    <paramValue name="parentDataDir">common/comparativeGenomics/</paramValue>
    <paramValue name="mercatorFastaDir">$$comparativeGenomicsFastaDir$$</paramValue>
    <paramValue name="mercatorGffDir">$$comparativeGenomicsGffDir$$</paramValue>
    <paramValue name="webServicesDataDir">$$webServicesDataDir$$</paramValue>
    <paramValue name="commonResourceXmlFile">$$projectName$$/common.xml</paramValue>
    <paramValue name="createReferenceGene2GeneInstanceMapping">false</paramValue>
    <paramValue name="organismSpecificCreateGenesForGeneFeatures"></paramValue>
    <dependsPattern name="*_MakeAndMaskTopLevelGenome"/>

  </subgraph>

</workflowGraph>
