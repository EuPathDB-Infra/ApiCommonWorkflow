<workflowGraph name="plasmoWorkflow">
  <param name="projectName"/>
  <param name="projectVersion"/>

  <constant name="comparativeGenomicsFastaDir">common/comparativeGenomics/Fasta/</constant>
  <constant name="comparativeGenomicsGffDir">common/comparativeGenomics/Gff/</constant>
  <constant name="webServicesDataDir">webServices/$$projectName$$/release-$$projectVersion$$/</constant>
  <constant name="downloadSiteDir">@@downloadSite@@/$$projectName$$/release-$$projectVersion$$/</constant>

  <globalSubgraph name="global" xmlFile="globalGraph.xml">
    <paramValue name="commonResourceXmlFile">$$project$$/$$project$$Common.xml</paramValue>
    <paramValue name="globalResourceXmlFile">globalResources.xml</paramValue>
  </globalSubgraph>

  <subgraph name="common" xmlFile="common.xml">
    <paramValue name="projectName">$$projectName$$</paramValue>
    <paramValue name="projectVersion">$$projectVersion$$</paramValue>
    <paramValue name="comparativeGenomicsFastaDir">$$comparativeGenomicsFastaDir$$</paramValue>
    <paramValue name="comparativeGenomicsGffDir">$$comparativeGenomicsGffDir$$</paramValue>
    <paramValue name="webServicesDataDir">$$webServicesDataDir$$</paramValue>
  </subgraph>

  <datasetTemplate class="organism">
    <prop name="project"/>
    <prop name="nameLower"/>
    <prop name="ncbiTaxonId"/>
    <prop name="extractProteins"/>
    <prop name="hasOrganelleSeq"/>
    <prop name="organismFullName"/>
    <prop name="organelleInitDownloadDirSubgraph"/>
    <prop name="genomeVirtualSeqsExtDbRlsSpec"/>
    <prop name="insertVirtualSeqFromAgpFileResourceName"/>
    <prop name="insertVirtualSeqFromAgpFile"/>
    <prop name="repeatMaskSpecies Plasmodium"/>
    <prop name="twoLetterAbbrev"/>
    <prop name="loadDbest"/>
    <prop name="parentNcbiTaxonId"/>
    <prop name="usePredictedTranscripts"/>
    <prop name="predictedTranscriptsExtDbRlsSpec"/>
    <prop name="runtRNAScan"/>
    <prop name="runExportPred"/>
    <prop name="maxIntronSize"/>
    <prop name="taxonHierarchyForBlastxFilter Apicomplexa Plasmodium"/>
    <prop name="genomeSize"/>
    <prop name="skipProteomeAnalysis"/>
    <prop name="skipGenomeAnalysis"/>
    <prop name="loadEpitope"/>
    <prop name="makeAssemblySeqs"/>
    <prop name="makeAssemblies"/>
    <prop name="mapAssemblySeqsAndAssemblies"/>
    <prop name="loadOrganismSpecificESTResource"/>
    <prop name="loadOrganismSpecificMassSpecResource"/>
    <prop name="loadProductName"/>
    <prop name="distanceBetweenStartsForAlignmentsInSameCluster"/>
    <prop name="minOrfLength"/>
    <prop name="deprecated"/>
    <prop name="soTermIdsOrNames"/>
    <prop name="makeESTDownloadFile"/>
    <prop name="makeProteomeDownloadFile"/>
    <prop name="makeGenomicDownloadFile"/>
    <prop name="hasMito"/>
    <prop name="hasPlastid"/>

    <subgraph name="LoadGenome" xmlFile="loadGenome.xml">
      <paramValue name="parentDataDir"></paramValue>
      <paramValue name="organismName">&&NAME&&</paramValue>
      <paramValue name="genomeExtDbRlsSpec">&&NAME&&_chromosomes_RSRC|@@&&NAME&&_chromosomes_VER@@</paramValue>
      <paramValue name="organismResourceXmlFile">&&projectLower&&/&&nameLower&&.xml</paramValue>
      <paramValue name="organismSpecificISFReference">&&projectLower&&/&&nameLower&&ISFResource.xml</paramValue>
      <paramValue name="ncbiTaxonId">&&ncbiTaxonId&&</paramValue>
      <paramValue name="downloadSiteDir">$$downloadSiteDir$$</paramValue>
      <paramValue name="extractProteins">&&extractProteins&&</paramValue>
      <paramValue name="projectName">$$projectName$$</paramValue>
      <paramValue name="projectVersion">$$projectVersion$$</paramValue>
      <paramValue name="haveOrganelleGenomeSequence">&&hasOrganelleSeq&&</paramValue>
      <paramValue name="organelleInitDownloadDirSubgraph">&&organelleInitDownloadDirSubgraph&&</paramValue>
      <depends name="common"/>
      <dependsGlobal name="taxonomy_RSRC"/> 
      <dependsGlobal name="SO_RSRC"/>
    </subgraph>

    <subgraph name="MakeAndMaskTopLevelGenome" xmlFile="makeAndMaskTopLevelGenome.xml">
      <paramValue name="parentDataDir"></paramValue>
      <paramValue name="organismName">&&NAME&&</paramValue>
      <paramValue name="organismFullName">&&organismFullName&&</paramValue>
      <paramValue name="genomeExtDbRlsSpec">&&NAME&&_chromosomes_RSRC|@@&&NAME&&_chromosomes_VER@@</paramValue>
      <paramValue name="genomeVirtualSeqsExtDbRlsSpec">&&genomeVirtualSeqsExtDbRlsSpec&&</paramValue>
      <paramValue name="insertVirtualSeqFromAgpFileResourceName">&&insertVirtualSeqFromAgpFileResourceName&&</paramValue>
      <paramValue name="insertVirtualSeqFromAgpFile">&&insertVirtualSeqFromAgpFile&&</paramValue>
      <paramValue name="repeatMaskSpecies">-species &&repeatMaskSpecies&&</paramValue>
      <paramValue name="organismResourceXmlFile">&&projectLower&&/&&nameLower&&.xml</paramValue>
      <paramValue name="comparativeGenomicsFastaDir">$$comparativeGenomicsFastaDir$$</paramValue>
      <paramValue name="comparativeGenomicsGffDir">$$comparativeGenomicsGffDir$$</paramValue>
      <depends name="&&NAME&&LoadGenome"/>
    </subgraph>

    <subgraph name="PostLoadGenome" xmlFile="postLoadGenome.xml">
      <paramValue name="parentDataDir"></paramValue>
      <paramValue name="organismName">&&NAME&&</paramValue>
      <paramValue name="organismFullName">&&organismFullName&&</paramValue>
      <paramValue name="organismAbbrev">&&NAME&&</paramValue>
      <paramValue name="genomeExtDbRlsSpec">&&NAME&&_chromosomes_RSRC|@@&&NAME&&_chromosomes_VER@@</paramValue>
      <paramValue name="iedbResourceName">&&NAME&&_IEDB_Epitopes_RSRC</paramValue>
      <paramValue name="iedbVersion">@@&&NAME&&_IEDB_Epitopes_VER@@</paramValue>
      <paramValue name="iedbDbRefResourceName">&&NAME&&_IEDB_Epitopes_DBxRefs_RSRC</paramValue>
      <paramValue name="dbESTResourceName">&&NAME&&_dbEST_RSRC</paramValue>
      <paramValue name="dbESTVersion">@@&&NAME&&_dbEST_VER@@</paramValue>
      <paramValue name="loadDbest">&&loadDbest&&</paramValue>
      <paramValue name="ncbiTaxonId">&&ncbiTaxonId&&</paramValue>
      <paramValue name="parentNcbiTaxonId">&&parentNcbiTaxonId&&</paramValue>
      <paramValue name="usePredictedTranscripts">&&usePredictedTranscripts&&</paramValue>
      <paramValue name="predictedTranscriptsExtDbRlsSpec">&&predictedTranscriptsExtDbRlsSpec&&</paramValue>
      <paramValue name="runtRNAScan">&&runtRNAScan&&</paramValue>
      <paramValue name="runExportPred">&&runExportPred&&</paramValue>
      <paramValue name="maxIntronSize">&&maxIntronSize&&</paramValue>
      <paramValue name="taxonHierarchyForBlastxFilter">&&taxonHierarchyForBlastxFilter&&</paramValue>
      <paramValue name="repeatMaskSpecies">-species &&repeatMaskSpecies&&</paramValue>
      <paramValue name="genomeSize">&&genomeSize&&</paramValue>
      <paramValue name="skipProteomeAnalysis">&&skipProteomeAnalysis&&</paramValue>
      <paramValue name="skipGenomeAnalysis">&&skipGenomeAnalysis&&</paramValue>
      <paramValue name="loadEpitope">&&loadEpitope&&</paramValue>
      <paramValue name="makeAssemblySeqs">&&makeAssemblySeqs&&</paramValue>
      <paramValue name="makeAssemblies">&&makeAssemblies&&</paramValue>
      <paramValue name="mapAssemblySeqsAndAssemblies">&&mapAssemblySeqsAndAssemblies&&</paramValue>
      <paramValue name="loadOrganismSpecificESTResource">&&loadOrganismSpecificESTResource&&</paramValue>
      <paramValue name="loadOrganismSpecificMassSpecResource">&&loadOrganismSpecificMassSpecResource&&</paramValue>
      <paramValue name="distanceBetweenStartsForAlignmentsInSameCluster">&&distanceBetweenStartsForAlignmentsInSameCluster&&</paramValue>
      <paramValue name="organismSpecificESTResourcesReference">&&organismSpecificESTResourcesReference&&</paramValue>
      <paramValue name="organismSpecificMassSpecResourcesReference">&&organismSpecificMassSpecResourcesReference&&</paramValue>
      <paramValue name="organismSpecificProductNameResourcesReference">&&organismSpecificProductNameResourcesReference&&</paramValue>
      <paramValue name="organismResourceXmlFile">&&projectLower&&/&&nameLower&&.xml</paramValue>
      <depends name="&&NAME&&LoadGenome"/>
    </subgraph>

    <subgraph name="SpecificWorkflow" xmlFile="&&projectLower&&/&&nameLower&&Specific.xml">
      <paramValue name="parentDataDir"></paramValue>
      <paramValue name="organismResourceXmlFile">&&projectLower&&/&&nameLower&&.xml</paramValue>
      <paramValue name="downloadSiteDataDir">@@downloadSiteDir@@/$$projectName$$/release-$$projectVersion$$</paramValue>
      <depends name="&&NAME&&LoadGenome"/>
    </subgraph>

    <subgraph name="LoadGeneAliases" xmlFile="loadGeneAliases.xml">
      <paramValue name="parentDataDir"></paramValue>
      <paramValue name="organismName">&&NAME&&</paramValue>
      <paramValue name="organismSpecificGeneAliasesReference">&&projectLower&&/&&nameLower&&GeneAliasesResource.xml</paramValue>
      <paramValue name="organismResourceXmlFile">&&projectLower&&/&&nameLower&&.xml</paramValue>
      <depends name="&&NAME&&LoadGenome"/>
    </subgraph>

    <subgraph name="LoadDbxRefs" xmlFile="loadDbxRefs.xml">
      <paramValue name="projectName">$$projectName$$</paramValue>
      <paramValue name="projectVersion">$$projectVersion$$</paramValue>
      <paramValue name="parentDataDir"></paramValue>
      <paramValue name="downloadSiteDataDir">@@downloadSiteDir@@/$$projectName$$/release-$$projectVersion$$</paramValue>
      <paramValue name="organismName">&&NAME&&</paramValue>
      <paramValue name="organismSpecificDbxRefsReference">&&projectLower&&/&&nameLower&&DbxRefsResource.xml</paramValue>
      <paramValue name="organismResourceXmlFile">&&projectLower&&/&&nameLower&&.xml</paramValue>
      <depends name="&&NAME&&LoadGeneAliases"/>
    </subgraph>

    <subgraph name="MakeAndFormatDownloadFiles" xmlFile="makeAndFormatDownloadFiles.xml">
      <paramValue name="downloadSiteDataDir">@@downloadSiteDir@@/$$projectName$$/release-$$projectVersion$$</paramValue>
      <paramValue name="organismName">&&NAME&&</paramValue>
      <paramValue name="organismFullName">&&organismFullName&&</paramValue>
      <paramValue name="ncbiTaxonId">&&ncbiTaxonId&&</paramValue>
      <paramValue name="parentNcbiTaxonId">&&parentNcbiTaxonId&&</paramValue>
      <paramValue name="genomeSource">@@&&NAME&&GenomeSource@@</paramValue>
      <paramValue name="projectName">$$projectName$$</paramValue>
      <paramValue name="projectVersion">$$projectVersion$$</paramValue>
      <paramValue name="dbESTExtDbRlsSpec">&&NAME&&_dbEST_RSRC|@@&&NAME&&_dbEST_VER@@</paramValue>
      <paramValue name="webServicesDataDir">@@webServicesDir@@/$$projectName$$/release-$$projectVersion$$/</paramValue>
      <paramValue name="genomeExtDbRlsSpec">&&NAME&&_genome_RSRC|@@&&NAME&&_genome_VER@@</paramValue>
      <paramValue name="genomeVirtualSeqsExtDbRlsSpec">&&genomeVirtualSeqsExtDbRlsSpec&&</paramValue>
      <paramValue name="minOrfLength">50</paramValue>
      <paramValue name="deprecated">&&deprecated&&</paramValue>
      <paramValue name="soTermIdsOrNames">&&soTermIdsOrNames&&</paramValue>
      <paramValue name="makeESTDownloadFile">&&makeESTDownloadFile&&</paramValue>
      <paramValue name="makeProteomeDownloadFile">&&makeProteomeDownloadFile&&</paramValue>
      <paramValue name="makeGenomicDownloadFile">&&makeGenomicDownloadFile&&</paramValue>
      <depends name="&&NAME&&PostLoadGenome"/>
      <depends name="&&NAME&&MakeAndMaskTopLevelGenome"/>
    </subgraph>
  </datasetTemplate>


  <subgraph name="ComparativeGenomics" xmlFile="comparativeGenomics.xml">
    <paramValue name="parentDataDir">common/comparativeGenomics/</paramValue>
    <paramValue name="mercatorDraftGenomes">@@mercatorDraftGenomes@@</paramValue>
    <paramValue name="mercatorNonDraftGenomes">@@mercatorNonDraftGenomes@@</paramValue>
    <paramValue name="mercatorDraftExternalDbSpec">@@mercatorDraftExternalDbSpec@@</paramValue>
    <paramValue name="mercatorNonDraftExternalDbSpec">@@mercatorNonDraftExternalDbSpec@@</paramValue>
    <paramValue name="mercatorDraftSeqTables">@@mercatorDraftSeqTables@@</paramValue>
    <paramValue name="mercatorNonDraftSeqTables">@@mercatorNonDraftSeqTables@@</paramValue>
    <paramValue name="cndSrcBin">@@cndSrcBin@@</paramValue>
    <paramValue name="mavidExe">@@mavidExe@@</paramValue>
    <paramValue name="projectName">$$projectName$$</paramValue>
    <paramValue name="mercatorFastaDir">$$comparativeGenomicsFastaDir$$</paramValue>
    <paramValue name="mercatorGffDir">$$comparativeGenomicsGffDir$$</paramValue>
    <paramValue name="webServicesDataDir">$$webServicesDataDir$$</paramValue>
    <paramValue name="organismResourceXmlFile">plasmodb/plasmodbCommon.xml</paramValue>
    <paramValue name="commonResourceXmlFile">plasmodb/plasmodbCommon.xml</paramValue>
    <paramValue name="createGenesForGeneFeatures">false</paramValue>
    <paramValue name="organismSpecificCreateGenesForGeneFeatures"></paramValue>
    <templateDepends name="MakeAndMaskTopLevelGenome" xmlFile="organismTemplate.xml"/>

  </subgraph>

</workflowGraph>
