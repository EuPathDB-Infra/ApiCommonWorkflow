<workflowGraph name="">
  <param name="parentDataDir"/>
  <param name="samplesDataDir"/>
  <param name="organismAbbrev"/>
  <param name="projectName"/>
  <param name="geneModelFileForSsa"/>
  <param name="genomicSeqsFileForSsa"/>
  <param name="transcriptSeqsFileForSsa"/>
  <param name="relativeDownloadSiteDir"/>
  <param name="genomeExtDbRlsSpec"/>
  <param name="experimentResourceName"/>
  <param name="experimentResourceVersion"/>
  <param name="strandSpecific"/>
  <param name="variableLengthReads"/>
  <param name="limitNU"/>
  <param name="numInsertions"/>

  <constant name="experimentResourcesDataDir">$$parentDataDir$$/$$experimentResourceName$$</constant>

  <datasetTemplate class="rnaSeqSample">
    <prop name="experimentName"/>
    <prop name="sampleName"/>
    <prop name="sampleOrder"/>

    <subgraph name="${sampleName}_RSRC" xmlFile="loadResource.xml">
      <paramValue name="resourceName">$$organismAbbrev$$_${experimentName}_${sampleName}_rnaSeqSample_RSRC</paramValue>
      <paramValue name="resourceXmlFileName">$$projectName$$/${organismAbbrev}/${experimentName}.xml</paramValue>
      <paramValue name="parentDataDir">$$samplesDataDir$$</paramValue>
    </subgraph>


    <subgraph name="analyzeSample-${sampleName}" xmlFile="analyzeRnaSeqOrChipSeqSample.xml">
      <paramValue name="parentDataDir">$$samplesDataDir$$</paramValue>
      <paramValue name="sampleName">${sampleName}</paramValue>
      <paramValue name="geneModelFileForSsa">$$geneModelFileForSsa$$</paramValue>
      <paramValue name="shortSeqsFile">$$experimentResourcesDataDir$$/final/${sampleName}.txt</paramValue>
      <paramValue name="rnaSeqExtDbRlsSpec">$$experimentResourceName$$|$$experimentResourceVersion$$</paramValue>
      <paramValue name="genomeExtDbSpec">$$genomeExtDbRlsSpec$$</paramValue>
      <paramValue name="genomicSeqsFileForSsa">$$genomicSeqsFileForSsa$$</paramValue>
      <paramValue name="transcriptSeqsFileForSsa">$$transcriptSeqsFileForSsa$$</paramValue>
      <paramValue name="pairedReadFilePath"></paramValue>
      <paramValue name="numInsertions">1</paramValue>
      <paramValue name="limitNU">14</paramValue>
      <paramValue name="SNPs">false</paramValue>
      <paramValue name="strandSpecific">$$strandSpecific$$</paramValue>
      <paramValue name="variableLengthReads">$$variableLengthReads$$</paramValue>
      <depends name="${sampleName}_RSRC"/>
    </subgraph>
  
   <!-- might have to reformat the count and mapping stats files made by RUM -->

  </datasetTemplate>

</workflowGraph>

