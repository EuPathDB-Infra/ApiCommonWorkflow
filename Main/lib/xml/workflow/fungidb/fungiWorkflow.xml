<workflowGraph name="fungiDBWorkflow">

  <param name="projectName" />
  <param name="projectVersion" />

  <constant name="comparativeGenomicsFastaDir">
       common/comparativeGenomics/Fasta/
  </constant>
  
  <constant name="comparativeGenomicsGffDir">
       common/comparativeGenomics/Gff/
  </constant>

  <constant name="webServicesDataDir">
       webServices/$$projectName$$/release-$$projectVersion$$/
  </constant>

  <!-- Global subgraphs, available to all subgraphs -->
  <globalSubgraph name="global" xmlFile="globalGraph.xml">
      <paramValue name="isolatesResourceReference"></paramValue>
      <paramValue name="loadIsolates">false</paramValue>
      <paramValue name="commonResourceXmlFile"></paramValue>
      <paramValue name="globalResourceXmlFile">globalResources.xml</paramValue>
  </globalSubgraph>

  <!-- Common subgraphs -->
  <subgraph name="common" xmlFile="common.xml">
      <paramValue name="projectName">$$projectName$$</paramValue>
      <paramValue name="projectVersion">$$projectVersion$$</paramValue>
      <paramValue name="comparativeGenomicsFastaDir">$$comparativeGenomicsFastaDir$$</paramValue>
      <paramValue name="comparativeGenomicsGffDir">$$comparativeGenomicsGffDir$$</paramValue>
      <paramValue name="webServicesDataDir">$$webServicesDataDir$$</paramValue>
  </subgraph>


  <!-- ////////////////////////////////////////////////

         Saccharomyces cerevisiae S288C, the canonical FungiDB species

       ////////////////////////////////////////////////  -->

  <!-- I broke LoadGenome out into the species-specific workflow. Seems simpler to group together -->
  <subgraph name="saccharomyces_cerevisiae_s288c_LoadGenome" xmlFile="loadGenome.xml">

      <paramValue name="parentDataDir"></paramValue>

      <!-- The symbolic name of the organism -->      
      <paramValue name="organismName">
            saccharomyces_cerevisiae_s288c
      </paramValue>

      <!-- The current release of the data source -->
      <paramValue name="genomeExtDbRlsSpec">
            saccharomyces_cerevisiae_s288c_genomic_sequence_RSRC|@@saccharomyces_cerevisiae_s288c_VER@@
      </paramValue>

      <!-- location of the ISF resource file (ApiCommonData/Load/lib/xml/datasources/fungidb/saccharomyces_cerevisiae_s288c.xml) -->
      <paramValue name="organismResourceXmlFile">
            fungidb/saccharomyces_cerevisiae_s288c.xml
      </paramValue>

     <!-- Species-specific ISF workflow graph -->
      <paramValue name="organismSpecificISFReference">
            fungidb/saccharomyces_cerevisiae_s288c_workflow_ISF.xml
      </paramValue>

      <!-- Taxonomy ID: This is the official ID, but not loaded in Core... -->
      <paramValue name="ncbiTaxonId">
            559292
      </paramValue>

      <!-- Location of the downloads directory -->
      <paramValue name="downloadSiteDataDir">
            downloadSite/$$projectName$$/release-$$projectVersion$$
      </paramValue>

      <paramValue name="extractProteins">
            true
      </paramValue>

      <paramValue name="projectName">
            $$projectName$$
      </paramValue>

      <depends name="common" />
      <dependsGlobal name="taxonomy_RSRC" /> 
      <dependsGlobal name="SO_RSRC" />
  </subgraph>      

  <!-- PostLoadGenome -->
  <subgraph name="saccharomyces_cerevisiae_s288c_PostLoadGenome" xmlFile="postLoadGenome.xml">
      <paramValue name="projectName">$$projectName$$</paramValue>
      <paramValue name="projectVersion">$$projectVersion$$</paramValue>
      <paramValue name="parentDataDir"></paramValue>
      <paramValue name="organismName">saccharomyces_cerevisiae_s288c</paramValue>
      <paramValue name="organismFullName">@@saccharomyces_cerevisiae_s288c_OrganismFullName@@</paramValue>
      <paramValue name="organismTwoLetterAbbrev">ScereS288C</paramValue>

      <!-- customize: the rsource XML file --> 
     <paramValue name="organismResourceXmlFile">fungidb/saccharomyces_cerevisiae_s288c.xml</paramValue>

      <!-- customize -->
      <paramValue name="genomeExtDbRlsSpec">
              saccharomyces_cerevisiae_s288c_genomic_sequence_RSRC|@@saccharomyces_cerevisiae_s288c_VER@@
      </paramValue>

      <!-- customize: taxonomy -->
      <paramValue name="ncbiTaxonId">559292</paramValue>
      <paramValue name="parentNcbiTaxonId">4932</paramValue>

      <!-- customize -->
      <paramValue name="genomeSize">18874889</paramValue>

      <paramValue name="iedbResourceName"></paramValue>
      <paramValue name="iedbVersion"></paramValue>
      <paramValue name="iedbDbRefResourceName"></paramValue>
      <paramValue name="dbESTResourceName"></paramValue>
      <paramValue name="dbESTVersion"></paramValue>

      <paramValue name="usePredictedTranscripts">false</paramValue>
      <paramValue name="predictedTranscriptsExtDbRlsSpec"></paramValue>
      <paramValue name="runtRNAScan">true</paramValue>
      <paramValue name="runExportPred">false</paramValue>
      <paramValue name="maxIntronSize">1000</paramValue>
      <paramValue name="taxonHierarchyForBlastxFilter">Eukaryota Fungi Ascomycota</paramValue>
      <paramValue name="nrdbExtDbRlsSpec">NRDB_RSRC|@@NRDB_VER@@</paramValue>
      <paramValue name="repeatMaskSpecies">-species Fungi</paramValue>
      <paramValue name="skipProteomeAnalysis">false</paramValue>
      <paramValue name="skipGenomeAnalysis">false</paramValue>
      <paramValue name="mapEpitope">false</paramValue>
      <paramValue name="makeAssemblySeqs">false</paramValue>
      <paramValue name="makeAssemblies">false</paramValue>
      <paramValue name="mapAssemblySeqsAndAssemblies">false</paramValue>
      <paramValue name="loadOrganismSpecificESTResource">false</paramValue>
      <paramValue name="loadOrganismSpecificMassSpecResource">false</paramValue>

      <!-- customize -->
      <paramValue name="distanceBetweenStartsForAlignmentsInSameCluster">30000</paramValue>
      <paramValue name="organismSpecificESTResourcesReference"></paramValue>
      <paramValue name="organismSpecificMassSpecResourcesReference"></paramValue>

      <depends name="saccharomyces_cerevisiae_s288c_LoadGenome"/>
  </subgraph>

  <subgraph name="saccharomyces_cerevisiae_s288c_workflow" xmlFile="fungidb/saccharomyces_cerevisiae_s288c_workflow.xml">
    <paramValue name="projectName">$$projectName$$</paramValue>
    <paramValue name="projectVersion">$$projectVersion$$</paramValue>
    <paramValue name="parentDataDir"></paramValue>
    <paramValue name="organismResourceXmlFile">fungidb/saccharomyces_cerevisiae_s288c.xml</paramValue>
    <paramValue name="downloadSiteDataDir">downloadSite/$$projectName$$/release-$$projectVersion$$</paramValue>
    <paramValue name="webServicesDataDir">$$webServicesDataDir$$</paramValue>

    <depends name="saccharomyces_cerevisiae_s288c_PostLoadGenome"/>
  </subgraph>


  <!-- ////////////////////////////////////////////////

         Neurospora crassa OR74A

       ////////////////////////////////////////////////  -->

  <!-- LoadGenome -->
  <subgraph name="neurospora_crassa_or74a_LoadGenome" xmlFile="loadGenome.xml">

      <paramValue name="parentDataDir"></paramValue>
      
      <paramValue name="organismName">
            neurospora_crassa_or74a
      </paramValue>

      <paramValue name="genomeExtDbRlsSpec">
            neurospora_crassa_or74a_genomic_sequence_RSRC|@@neurospora_crassa_or74a_VER@@
      </paramValue>

      <paramValue name="organismResourceXmlFile">
            fungidb/neurospora_crassa_or74a.xml
      </paramValue>

      <paramValue name="organismSpecificISFReference">
            fungidb/neurospora_crassa_or74a_workflow_ISF.xml
      </paramValue>

      <paramValue name="ncbiTaxonId">
            367110
      </paramValue>

      <paramValue name="downloadSiteDataDir">
            downloadSite/$$projectName$$/release-$$projectVersion$$
      </paramValue>

      <paramValue name="extractProteins">
            true
      </paramValue>

      <paramValue name="projectName">
            $$projectName$$
      </paramValue>

      <depends name="common" />
      <dependsGlobal name="taxonomy_RSRC" /> 
      <dependsGlobal name="SO_RSRC" />

  </subgraph>

  <subgraph name="neurospora_crassa_or74a_PostLoadGenome" xmlFile="postLoadGenome.xml">
    <paramValue name="projectName">$$projectName$$</paramValue>
    <paramValue name="projectVersion">$$projectVersion$$</paramValue>
    <paramValue name="parentDataDir"></paramValue>
    <paramValue name="organismName">neurospora_crassa_or74a</paramValue>
    <paramValue name="organismFullName">@@neurospora_crassa_or74a_OrganismFullName@@</paramValue>
    <paramValue name="organismTwoLetterAbbrev">CneoH99</paramValue>
    <paramValue name="genomeExtDbRlsSpec">neurospora_crassa_or74a_genomic_sequence_RSRC|@@neurospora_crassa_or74a_VER@@</paramValue>
    <paramValue name="iedbResourceName"></paramValue>
    <paramValue name="iedbVersion"></paramValue>
    <paramValue name="iedbDbRefResourceName"></paramValue>
    <paramValue name="dbESTResourceName"></paramValue>
    <paramValue name="dbESTVersion"></paramValue>
    <paramValue name="ncbiTaxonId">367110</paramValue>
    <paramValue name="parentNcbiTaxonId">5207</paramValue>
    <paramValue name="usePredictedTranscripts">false</paramValue>
    <paramValue name="predictedTranscriptsExtDbRlsSpec"></paramValue>
    <paramValue name="runtRNAScan">true</paramValue>
    <paramValue name="runExportPred">false</paramValue>
    <paramValue name="maxIntronSize">500</paramValue>
    <paramValue name="taxonHierarchyForBlastxFilter">Eukaryota Fungi Basidiomycota</paramValue>
    <paramValue name="nrdbExtDbRlsSpec">NRDB_RSRC|@@NRDB_VER@@</paramValue>
    <paramValue name="repeatMaskSpecies">-species Fungi</paramValue>
    <paramValue name="genomeSize">18874889</paramValue>
    <paramValue name="skipProteomeAnalysis">false</paramValue>
    <paramValue name="skipGenomeAnalysis">false</paramValue>
    <paramValue name="mapEpitope">false</paramValue>
    <paramValue name="makeAssemblySeqs">false</paramValue>
    <paramValue name="makeAssemblies">false</paramValue>
    <paramValue name="mapAssemblySeqsAndAssemblies">false</paramValue>
    <paramValue name="loadOrganismSpecificESTResource">false</paramValue>
    <paramValue name="loadOrganismSpecificMassSpecResource">false</paramValue>
    <paramValue name="distanceBetweenStartsForAlignmentsInSameCluster">30000</paramValue>
    <paramValue name="organismSpecificESTResourcesReference"></paramValue>
    <paramValue name="organismSpecificMassSpecResourcesReference"></paramValue>
    <paramValue name="organismResourceXmlFile">fungidb/neurospora_crassa_or74a.xml</paramValue>
    <depends name="neurospora_crassa_or74a_LoadGenome"/>
  </subgraph>

  <subgraph name="neurospora_crassa_or74a_workflow" xmlFile="fungidb/neurospora_crassa_or74a_workflow.xml">
    <paramValue name="projectName">$$projectName$$</paramValue>
    <paramValue name="projectVersion">$$projectVersion$$</paramValue>
    <paramValue name="parentDataDir"></paramValue>
    <paramValue name="organismResourceXmlFile">fungidb/neurospora_crassa_or74a.xml</paramValue>
    <paramValue name="downloadSiteDataDir">downloadSite/$$projectName$$/release-$$projectVersion$$</paramValue>
    <paramValue name="webServicesDataDir">$$webServicesDataDir$$</paramValue>

    <depends name="neurospora_crassa_or74a_PostLoadGenome"/>
  </subgraph>


  <!-- ////////////////////////////////////////////////

         Cryptococcus neoformans var. grubii H99

       ////////////////////////////////////////////////  -->

  <!-- LoadGenome -->
  <subgraph name="cryptococcus_neoformans_grubii_h99_LoadGenome" xmlFile="loadGenome.xml">
    <paramValue name="parentDataDir"></paramValue>
    <paramValue name="organismName">cryptococcus_neoformans_grubii_h99</paramValue>
    <paramValue name="genomeExtDbRlsSpec">cryptococcus_neoformans_grubii_h99_genomic_sequence_RSRC|@@cryptococcus_neoformans_grubii_h99_VER@@</paramValue>
    <paramValue name="organismResourceXmlFile">fungidb/cryptococcus_neoformans_grubii_h99.xml</paramValue>
    <paramValue name="organismSpecificISFReference">fungidb/cryptococcus_neoformans_grubii_h99_workflow_ISF.xml</paramValue>
    <paramValue name="ncbiTaxonId">235443</paramValue>
    <paramValue name="downloadSiteDataDir">downloadSite/$$projectName$$/release-$$projectVersion$$</paramValue>
    <paramValue name="extractProteins">true</paramValue>
    <paramValue name="projectName">$$projectName$$</paramValue>
    <depends name="common"/>
    <dependsGlobal name="taxonomy_RSRC"/> 
    <dependsGlobal name="SO_RSRC"/>
  </subgraph>

  <subgraph name="cryptococcus_neoformans_grubii_h99_PostLoadGenome" xmlFile="postLoadGenome.xml">
    <paramValue name="projectName">$$projectName$$</paramValue>
    <paramValue name="projectVersion">$$projectVersion$$</paramValue>
    <paramValue name="parentDataDir"></paramValue>
    <paramValue name="organismName">cryptococcus_neoformans_grubii_h99</paramValue>
    <paramValue name="organismFullName">@@cryptococcus_neoformans_grubii_h99_OrganismFullName@@</paramValue>
    <paramValue name="organismTwoLetterAbbrev">CneoH99</paramValue>
    <paramValue name="genomeExtDbRlsSpec">cryptococcus_neoformans_grubii_h99_genomic_sequence_RSRC|@@cryptococcus_neoformans_grubii_h99_genomic_sequence_VER@@</paramValue>
    <paramValue name="iedbResourceName"></paramValue>
    <paramValue name="iedbVersion"></paramValue>
    <paramValue name="iedbDbRefResourceName"></paramValue>
    <paramValue name="dbESTResourceName"></paramValue>
    <paramValue name="dbESTVersion"></paramValue>
    <paramValue name="ncbiTaxonId">235443</paramValue>
    <paramValue name="parentNcbiTaxonId">5207</paramValue>
    <paramValue name="usePredictedTranscripts">false</paramValue>
    <paramValue name="predictedTranscriptsExtDbRlsSpec"></paramValue>
    <paramValue name="runtRNAScan">true</paramValue>
    <paramValue name="runExportPred">false</paramValue>
    <paramValue name="maxIntronSize">500</paramValue>
    <paramValue name="taxonHierarchyForBlastxFilter">Eukaryota Fungi Basidiomycota</paramValue>
    <paramValue name="nrdbExtDbRlsSpec">NRDB_RSRC|@@NRDB_VER@@</paramValue>
    <paramValue name="repeatMaskSpecies">-species Fungi</paramValue>
    <paramValue name="genomeSize">18874889</paramValue>
    <paramValue name="skipProteomeAnalysis">false</paramValue>
    <paramValue name="skipGenomeAnalysis">false</paramValue>
    <paramValue name="mapEpitope">false</paramValue>
    <paramValue name="makeAssemblySeqs">false</paramValue>
    <paramValue name="makeAssemblies">false</paramValue>
    <paramValue name="mapAssemblySeqsAndAssemblies">false</paramValue>
    <paramValue name="loadOrganismSpecificESTResource">false</paramValue>
    <paramValue name="loadOrganismSpecificMassSpecResource">false</paramValue>
    <paramValue name="distanceBetweenStartsForAlignmentsInSameCluster">30000</paramValue>
    <paramValue name="organismSpecificESTResourcesReference"></paramValue>
    <paramValue name="organismSpecificMassSpecResourcesReference"></paramValue>
    <paramValue name="organismResourceXmlFile">fungidb/cryptococcus_neoformans_grubii_h99.xml</paramValue>
    <depends name="cryptococcus_neoformans_grubii_h99_LoadGenome"/>
  </subgraph>

  <subgraph name="cryptococcus_neoformans_grubii_h99_workflow" xmlFile="fungidb/cryptococcus_neoformans_grubii_h99_workflow.xml">
    <paramValue name="projectName">$$projectName$$</paramValue>
    <paramValue name="projectVersion">$$projectVersion$$</paramValue>
    <paramValue name="parentDataDir"></paramValue>
    <paramValue name="organismResourceXmlFile">fungidb/cryptococcus_neoformans_grubii_h99.xml</paramValue>
    <paramValue name="downloadSiteDataDir">downloadSite/$$projectName$$/release-$$projectVersion$$</paramValue>
    <paramValue name="webServicesDataDir">$$webServicesDataDir$$</paramValue>

    <depends name="cryptococcus_neoformans_grubii_h99_PostLoadGenome"/>
  </subgraph>


</workflowGraph>

