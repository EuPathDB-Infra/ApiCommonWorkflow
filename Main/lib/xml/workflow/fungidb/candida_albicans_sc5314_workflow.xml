<!-- ////////////////////////////////////////////////

         Candida albicans (SC5314)

       ////////////////////////////////////////////////  -->

<workflowGraph name="candida_albicans_sc5314_workflow">

     <param name="projectName" />
     <param name="projectVersion" />
     <param name="parentDataDir" />
     <param name="downloadSiteDataDir"/>

     <param name="organismName" />
     <param name="organismFullName" />
     <param name="organismVersion" />
     <param name="ncbiTaxonId" />
     <param name="parentNcbiTaxonId" />


      <!-- This isn't handled yet!! -->
      <param name="webServicesDataDir"/>


     <!-- Set up some constants -->
     <constant name="dataDir">$$parentDataDir$$/workflow</constant>
     <constant name="downloadSiteDataDir">$$downloadSiteDataDir$$/$$organismName$$</constant>
 
     <!-- Location of the resource.xml file -->   
     <constant name="organismResourceXmlFile">fungidb/$$organismName$$.xml</constant>
           <!--  Constructing instead of passing
              <param name="organismResourceXmlFile"/>
           -->

       <!-- Create the data dir -->
       <step name="makeDataDir" stepClass="ApiCommonWorkflow::Main::WorkflowSteps::MakeDataDir">
             <paramValue name="dataDir">$$dataDir$$</paramValue>
       </step>

      <!-- LoadGenome -->
      <!-- CHECK: Can I use vars in subgraph names? -->
<!--      <subgraph name="candida_albicans_sc5314_LoadGenome" xmlFile="loadGenome.xml"> -->
      <subgraph name="$$organismName$$_LoadGenome" xmlFile="loadGenome.xml">

            <paramValue name="parentDataDir"></paramValue>    
            <paramValue name="organismName">$$organismName$$</paramValue>
            <paramValue name="genomeExtDbRlsSpec">$$organismName$$_genomic_sequence_RSRC|$$organismVersion$$</paramValue>
            <paramValue name="organismResourceXmlFile">$$organismResourceXmlFile$$</paramValue>
            <paramValue name="organismSpecificISFReference">fungidb/$$organismName$$_workflow_ISF.xml</paramValue>
            <paramValue name="ncbiTaxonId">$$ncbiTaxonId$$</paramValue>
            <paramValue name="downloadSiteDataDir">$$downloadSiteDataDir$$</paramValue>
            <paramValue name="extractProteins">true</paramValue>
            <paramValue name="projectName">$$projectName$$</paramValue>
     </subgraph>

     <!-- Post Load Genome -->
      <!-- CHECK: Can I use vars in subgraph names? -->
<!--  <subgraph name="candida_albicans_sc5314_PostLoadGenome" xmlFile="postLoadGenome.xml"> -->
  <subgraph name="$$organismName$$_PostLoadGenome" xmlFile="postLoadGenome.xml">
    <paramValue name="maxIntronSize">500</paramValue>
    <paramValue name="taxonHierarchyForBlastxFilter">Eukaryota Fungi Basidiomycota</paramValue>
    <paramValue name="genomeSize">18874889</paramValue>

    <paramValue name="projectName">$$projectName$$</paramValue>
    <paramValue name="projectVersion">$$projectVersion$$</paramValue>
    <paramValue name="parentDataDir"></paramValue>
    <paramValue name="organismName">$$organismName$$</paramValue>
    <paramValue name="organismFullName">$$organismFullName$$</paramValue>
    <paramValue name="organismTwoLetterAbbrev">$$organismTwoLetterAbbrev$$</paramValue>
    <paramValue name="genomeExtDbRlsSpec">$$organismName$$_genomic_sequence_RSRC|$$organismVersion$$</paramValue>
    <paramValue name="iedbResourceName"></paramValue>
    <paramValue name="iedbVersion"></paramValue>
    <paramValue name="iedbDbRefResourceName"></paramValue>
    <paramValue name="dbESTResourceName"></paramValue>
    <paramValue name="dbESTVersion"></paramValue>
    <paramValue name="ncbiTaxonId">$$ncbiTaxonId$$</paramValue>
    <paramValue name="parentNcbiTaxonId">$$parentNcbiTaxonId$$</paramValue>
    <paramValue name="usePredictedTranscripts">false</paramValue>
    <paramValue name="predictedTranscriptsExtDbRlsSpec"></paramValue>
    <paramValue name="runtRNAScan">true</paramValue>
    <paramValue name="runExportPred">false</paramValue>
    <paramValue name="nrdbExtDbRlsSpec">NRDB_RSRC|@@NRDB_VER@@</paramValue>
    <paramValue name="repeatMaskSpecies">-species Fungi</paramValue>
    <paramValue name="skipProteomeAnalysis">false</paramValue>
    <paramValue name="skipGenomeAnalysis">false</paramValue>
    <paramValue name="mapEpitope">false</paramValue>
    <paramValue name="makeAssemblySeqs">false</paramValue>
    <paramValue name="makeAssemblies">false</paramValue>
    <paramValue name="mapAssemblySeqsAndAssemblies">false</paramValue>
    <paramValue name="loadOrganismSpecificESTResource">false</paramValue>
    <paramValue name="loadOrganismSpecificMassSpecResource">false</paramValue>
    <paramValue name="distanceBetweenStartsForAlignmentsInSameCluster">30000</paramValue>
    <paramValue name="organismSpecificESTResourcesReference"></paramValue>
    <paramValue name="organismSpecificMassSpecResourcesReference"></paramValue>
    <paramValue name="organismResourceXmlFile">$$organismResourceXmlFile$$</paramValue>
<!--    <depends name="candida_albicans_sc5314_LoadGenome"/> -->
    <depends name="$$organismName$$_LoadGenome"/>
  </subgraph>


    <!-- GO -->
    <subgraph name="$$organismName$$_go_associations_RSRC" xmlFile="loadResource.xml">
      <paramValue name="resourceName">$$organismName$$_go_associations_RSRC</paramValue>
      <paramValue name="resourceXmlFileName">$$organismResourceXmlFile$$</paramValue>
      <paramValue name="parentDataDir">$$dataDir$$</paramValue>
      <depends name="makeDataDir"/>
      <dependsGlobal name="GO_RSRC"/>
      <dependsGlobal name="GO_evidence_codes_RSRC"/>
    </subgraph>

    <!-- EC Numbers -->
    <subgraph name="$$organismName$$_ec_ids_RSRC" xmlFile="loadResource.xml">
      <paramValue name="resourceName">$$organismName$$_ec_ids_RSRC</paramValue>
      <paramValue name="resourceXmlFileName">$$organismResourceXmlFile$$</paramValue>
      <paramValue name="parentDataDir">$$dataDir$$</paramValue>
      <depends name="makeDataDir"/>
      <dependsGlobal name="enzymeDB_RSRC"/>
    </subgraph>

    <!-- Aliases -->
    <subgraph name="$$organismName$$_gene_aliases_RSRC" xmlFile="loadResource.xml">
      <paramValue name="resourceName">$$organismName$$_gene_aliases_RSRC</paramValue>
      <paramValue name="resourceXmlFileName">$$organismResourceXmlFile$$</paramValue>
      <paramValue name="parentDataDir">$$dataDir$$</paramValue>
      <depends name="makeDataDir"/>
      <dependsGlobal name="$$organismName_LoadGenome" />
    </subgraph>

    <!-- XREFs -->
    <subgraph name="$$organismName$$_refseq_dbxrefs_RSRC" xmlFile="loadResource.xml">
      <paramValue name="resourceName">$$organismName$$_refseq_dbxrefs_RSRC</paramValue>
      <paramValue name="resourceXmlFileName">$$organismResourceXmlFile$$</paramValue>
      <paramValue name="parentDataDir">$$dataDir$$</paramValue>
      <depends name="makeDataDir"/>
      <dependsGlobal name="$$organismName_LoadGenome" />
    </subgraph>

    <!-- Uniprot -->
    <subgraph name="$$organismName$$_uniprot_dbxrefs_RSRC" xmlFile="loadResource.xml">
      <paramValue name="resourceName">$$organismName$$_uniprot_dbxrefs_RSRC</paramValue>
      <paramValue name="resourceXmlFileName">$$organismResourceXmlFile$$</paramValue>
      <paramValue name="parentDataDir">$$dataDir$$</paramValue>
      <depends name="makeDataDir"/>
      <dependsGlobal name="$$organismName_LoadGenome" />
    </subgraph>
   



</workflowGraph>