<workflowGraph name="createFullRecordCacheAndFile">
    <param name="downloadSiteDataDir"/>
    <param name="organismName"/>
    <param name="organismFullName"/>
    <param name="projectName"/>
    <param name="projectVersion"/>
    <param name="recordType"/>
    <param name="deprecated"/>
    <param name="outputFile"/>

    <constant name="cacheTable">ApiDB.$$recordType$$Detail</constant>
    <constant name="record">$$recordType$$RecordClasses.$$recordType$$RecordClass</constant>

    <step name="clearWdkCache" stepClass="ApiCommonWorkflow::Main::WorkflowSteps::ClearWdkCache">
      <paramValue name="model">$$projectName$$</paramValue>
    </step>

    <step name="clearCacheTable" stepClass="ApiCommonWorkflow::Main::WorkflowSteps::ClearCacheTable">
      <paramValue name="cacheTable">$$cacheTable$$</paramValue>
      <paramValue name="organismFullName">$$organismFullName$$</paramValue>
      <paramValue name="deprecated">$$deprecated$$</paramValue>
      <paramValue name="attributesTable">ApiDB.$$recordType$$ATTRIBUTES</paramValue>
    </step>

    <step name="createFullRecordCache" stepClass="ApiCommonWorkflow::Main::WorkflowSteps::CreateFullRecordCache">
      <paramValue name="record">$$record$$</paramValue>
      <paramValue name="organismFullName">$$organismFullName$$</paramValue>
      <paramValue name="attributesTable">ApiDB.$$recordType$$ATTRIBUTES</paramValue>
      <paramValue name="cacheTable">$$cacheTable$$</paramValue>
      <paramValue name="model">$$projectName$$</paramValue>
      <paramValue name="deprecated">$$deprecated$$</paramValue>
      <depends name="clearWdkCache"/>
      <depends name="clearCacheTable"/>
    </step>

    <step name="createFullRecordFile" stepClass="ApiCommonWorkflow::Main::WorkflowSteps::CreateFullRecordFile">
      <paramValue name="record">$$record$$</paramValue>
      <paramValue name="organismFullName">$$organismFullName$$</paramValue>
      <paramValue name="attributesTable">ApiDB.$$recordType$$ATTRIBUTES</paramValue>
      <paramValue name="cacheTable">$$cacheTable$$</paramValue>
      <paramValue name="model">$$projectName$$</paramValue>
      <paramValue name="dumpFile">$$outputFile$$</paramValue>
      <paramValue name="deprecated">$$deprecated$$</paramValue>
      <depends name="createFullRecordCache"/>
    </step>

</workflowGraph>
