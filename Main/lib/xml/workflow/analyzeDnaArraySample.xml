<workflowGraph name="analyzeDnaArraySample">
    <param name="parentDataDir"/>
    <param name="experimentDatasetName"/>
    <param name="inputSampleFile"/>
    <param name="sampleName"/>
    <param name="configFilesDir"/>
    <param name="organismAbbrev"/>

    <constant name="dataDir">$$parentDataDir$$/analyze_dna_Array_$$sampleName$$</constant>

    <step name="makeDataDir" stepClass="ReFlow::StepClasses::MakeDataDir">
      <paramValue name="dataDir">$$dataDir$$</paramValue>
    </step>

    <step name="writeStudyConfig" stepClass="ApiCommonWorkflow::Main::WorkflowSteps::WriteStudyConfig">
        <paramValue name="configOutputFile">$$configFilesDir$$/$$sampleName$$_config.txt</paramValue>
        <paramValue name="file">$$inputSampleFile$$</paramValue> 
        <paramValue name="analysisName">$$sampleName$$ (CGH Array)</paramValue>
        <paramValue name="protocolName">cghArrayQuantification</paramValue>
        <paramValue name="sourceIdType">reporter</paramValue>
        <paramValue name="inputProtocolAppNode"></paramValue>
        <paramValue name="profileSetName">$$experimentDatasetName$$ - profile</paramValue>
        <depends name="makeDataDir"/>
    </step>

    <step name="loadDnaArrayFromConfig" stepClass="ApiCommonWorkflow::Main::WorkflowSteps::InsertStudyResults" stepLoadTypes="plugin">
        <paramValue name="configFile">$$configFilesDir$$/$$sampleName$$_config.txt</paramValue>
        <paramValue name="inputDir">$$dataDir$$</paramValue>
        <paramValue name="extDbRlsSpec">$$experimentDatasetName$$</paramValue> 
        <paramValue name="studyName">$$experimentDatasetName$$</paramValue>
        <depends name="writeStudyConfig"/>
    </step>

  </workflowGraph>
