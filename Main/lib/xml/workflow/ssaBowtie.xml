<workflowGraph name="SsaBowtie">
  <param name="parentDataDir"/>
  <param name="shortSeqsFile"/>
  <param name="subjectIndexFile"/>
  <param name="geneModelFile"/>
  <param name="transcriptOrGenome"/>
  <param name="outputUniqueFile"/>
  <param name="outputNonUniqueFile"/>
  <param name="readType"/>

  <constant name="dataDir">$$parentDataDir$$/ssaBowtie</constant>
  <constant name="bowtieOutputFile">$$dataDir$$/bowtie.out</constant>

  <step name="makeDataDir" stepClass="ApiCommonWorkflow::Main::WorkflowSteps::MakeDataDir">
    <paramValue name="dataDir">$$dataDir$$</paramValue>
  </step>

    <step name="runBowtie" stepClass="ApiCommonWorkflow::Main::WorkflowSteps::SsaRunBowtie">
      <paramValue name="inputIndexFile">$$subjectIndexFile$$</paramValue>
      <paramValue name="inputShortSeqsFile">$$shortSeqsFile$$</paramValue>
      <paramValue name="outputFile">$$bowtieOutputFile$$</paramValue>
      <depends name="makeDataDir"/>
    </step>

    <step name="bowtieToUniqueAndNonUnique" stepClass="ApiCommonWorkflow::Main::WorkflowSteps::SsaBowtieToUniqueAndNonUnique">
     <paramValue name="inputBowtieFile">$$bowtieOutputFile$$</paramValue>
     <paramValue name="inputGeneModelFile">$$geneModelFile$$</paramValue>
     <paramValue name="outputUniqueFile">$$outputUniqueFile$$</paramValue>
     <paramValue name="outputNonUniqueFile">$$outputNonUniqueFile$$</paramValue>
     <paramValue name="transcriptOrGenome">$$transcriptOrGenome$$</paramValue>
     <paramValue name="readType">$$readType$$</paramValue>
    <depends name="runBowtie"/>
  </step>

</workflowGraph>
