<workflowGraph name="global">
      <param name="commonResourceXmlFile"/>
      <param name="globalResourceXmlFile"/>
      <param name="isolatesResourceReference"/>
      <param name="loadIsolates"/>

    <globalConstant name="global_PDBOutputFile">$$dataDir$$/PDBProteinSequences/pdb.fsa</globalConstant>
    <globalConstant name="global_NRDBOutputFile_shortDefline">$$dataDir$$/NRDB/nrdb-short-defline.fsa</globalConstant>
    <globalConstant name="global_NRDBOutputFile">$$dataDir$$/NRDB/nr</globalConstant>

    <constant name="dataDir">global</constant>

    <step name="makeDataDir" stepClass="ApiCommonWorkflow::Main::WorkflowSteps::MakeDataDir">
      <paramValue name="dataDir">$$dataDir$$</paramValue>
    </step>

    <step name="initUserGroupProject" 
          stepClass="ApiCommonWorkflow::Main::WorkflowSteps::InitUserGroupProject">
      <depends name="makeDataDir"/>
    </step>

  <subgraph name="GO_RSRC" xmlFile="loadResource.xml">
    <paramValue name="resourceName">GO_RSRC</paramValue>
    <paramValue name="resourceXmlFileName">$$globalResourceXmlFile$$</paramValue>
    <paramValue name="parentDataDir">$$dataDir$$</paramValue>
    <depends name="initUserGroupProject"/>
  </subgraph>

  <subgraph name="enzymeDB_RSRC" xmlFile="loadResource.xml">
    <paramValue name="resourceName">enzymeDB_RSRC</paramValue>
    <paramValue name="resourceXmlFileName">$$globalResourceXmlFile$$</paramValue>
    <paramValue name="parentDataDir">$$dataDir$$</paramValue>
    <depends name="initUserGroupProject"/>
  </subgraph>

  <subgraph name="PDBProteinSequences_RSRC" xmlFile="loadResource.xml">
    <paramValue name="resourceName">PDBProteinSequences_RSRC</paramValue>
    <paramValue name="resourceXmlFileName">$$globalResourceXmlFile$$</paramValue>
    <paramValue name="parentDataDir">$$dataDir$$</paramValue>
    <depends name="initUserGroupProject"/>
  </subgraph>

  <subgraph name="taxonomy_RSRC" xmlFile="loadResource.xml">
    <paramValue name="resourceName">taxonomy_RSRC</paramValue>
    <paramValue name="resourceXmlFileName">$$globalResourceXmlFile$$</paramValue>
    <paramValue name="parentDataDir">$$dataDir$$</paramValue>
    <depends name="initUserGroupProject"/>
  </subgraph>

  <subgraph name="updatePDBTaxon_RSRC" xmlFile="loadResource.xml">
    <paramValue name="resourceName">FetchPDBidx_RSRC</paramValue>
    <paramValue name="resourceXmlFileName">$$globalResourceXmlFile$$</paramValue>
    <paramValue name="parentDataDir">$$dataDir$$</paramValue>
    <depends name="initUserGroupProject"/>
    <depends name="PDBProteinSequences_RSRC"/>
    <depends name="taxonomy_RSRC"/>
  </subgraph>


  <subgraph name="SO_RSRC" xmlFile="loadResource.xml">
    <paramValue name="resourceName">SO_RSRC</paramValue>
    <paramValue name="resourceXmlFileName">$$globalResourceXmlFile$$</paramValue>
    <paramValue name="parentDataDir">$$dataDir$$</paramValue>
    <depends name="initUserGroupProject"/>
  </subgraph>

  <subgraph name="isolatesResource" xmlFile="$$isolatesResourceReference$$" includeIf="$$loadIsolates$$">
    <paramValue name="commonResourceXmlFile">$$commonResourceXmlFile$$</paramValue>
    <paramValue name="globalResourceXmlFile">$$globalResourceXmlFile$$</paramValue>
    <paramValue name="parentDir">$$dataDir$$</paramValue>
    <depends name="initUserGroupProject"/>
    <depends name="SO_RSRC"/>
    <depends name="taxonomy_RSRC"/>
  </subgraph>

  <subgraph name="Mged_Ontology_Term_Types_RSRC" xmlFile="loadResource.xml">
    <paramValue name="resourceName">Mged_Ontology_Term_Types_RSRC</paramValue>
    <paramValue name="resourceXmlFileName">$$globalResourceXmlFile$$</paramValue>
    <paramValue name="parentDataDir">$$dataDir$$</paramValue>
    <depends name="initUserGroupProject"/>
  </subgraph>

  <subgraph name="Mged_Ontology_Relationship_Types_RSRC" xmlFile="loadResource.xml">
    <paramValue name="resourceName">Mged_Ontology_Relationship_Types_RSRC</paramValue>
    <paramValue name="resourceXmlFileName">$$globalResourceXmlFile$$</paramValue>
    <paramValue name="parentDataDir">$$dataDir$$</paramValue>
    <depends name="initUserGroupProject"/>
    <depends name="Mged_Ontology_Term_Types_RSRC"/>
  </subgraph>

  <subgraph name="MGED_Ontology_RSRC" xmlFile="loadResource.xml">
    <paramValue name="resourceName">MGED_Ontology_RSRC</paramValue>
    <paramValue name="resourceXmlFileName">$$globalResourceXmlFile$$</paramValue>
    <paramValue name="parentDataDir">$$dataDir$$</paramValue>
    <depends name="initUserGroupProject"/>
    <depends name="Mged_Ontology_Term_Types_RSRC"/>
  </subgraph>

  <subgraph name="Mged_Ontology_Entry_RSRC" xmlFile="loadResource.xml">
    <paramValue name="resourceName">Mged_Ontology_Entry_RSRC</paramValue>
    <paramValue name="resourceXmlFileName">$$globalResourceXmlFile$$</paramValue>
    <paramValue name="parentDataDir">$$dataDir$$</paramValue>
    <depends name="initUserGroupProject"/>
    <depends name="MGED_Ontology_RSRC"/>
  </subgraph>

  <subgraph name="GO_evidence_codes_RSRC" xmlFile="loadResource.xml">
    <paramValue name="resourceName">GO_evidence_codes_RSRC</paramValue>
    <paramValue name="resourceXmlFileName">$$globalResourceXmlFile$$</paramValue>
    <paramValue name="parentDataDir">$$dataDir$$</paramValue>
    <depends name="initUserGroupProject"/>
  </subgraph>

  <subgraph name="interproscanData_RSRC" xmlFile="loadResource.xml">
    <paramValue name="resourceName">InterproscanData_RSRC</paramValue>
    <paramValue name="resourceXmlFileName">$$globalResourceXmlFile$$</paramValue>
    <paramValue name="parentDataDir">$$dataDir$$</paramValue>
    <depends name="initUserGroupProject"/>
  </subgraph>

  <subgraph name="NRDB_RSRC" xmlFile="loadResource.xml">
    <paramValue name="resourceName">NRDB_RSRC</paramValue>
    <paramValue name="resourceXmlFileName">$$globalResourceXmlFile$$</paramValue>
    <paramValue name="parentDataDir">$$dataDir$$</paramValue>
    <depends name="initUserGroupProject"/>
  </subgraph>


  <subgraph name="blatAlignmentQuality_RSRC" xmlFile="loadResource.xml">
    <paramValue name="resourceName">blatAlignmentQuality_RSRC</paramValue>
    <paramValue name="resourceXmlFileName">$$globalResourceXmlFile$$</paramValue>
    <paramValue name="parentDataDir">$$dataDir$$</paramValue>
    <depends name="initUserGroupProject"/>
  </subgraph>

    <step name="initClusterHomeDir"
          stepClass="ApiCommonWorkflow::Main::WorkflowSteps::InitClusterHomeDir">
    </step>

    <step name="mirrorToCluster" stepClass="ApiCommonWorkflow::Main::WorkflowSteps::MirrorToComputeCluster">
      <paramValue name="fileOrDirToMirror">$$dataDir$$</paramValue>
      <depends name="initClusterHomeDir"/>
      <depends name="NRDB_RSRC"/>
      <depends name="PDBProteinSequences_RSRC"/>
    </step>

</workflowGraph>
