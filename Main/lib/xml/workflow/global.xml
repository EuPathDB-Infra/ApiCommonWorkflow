<workflowGraph name="global">
      <param name="commonResourceXmlFile"/>
      <param name="globalResourceXmlFile"/>
      <param name="isolatesResourceReference"/>

    <globalConstant name="global_PDBOutputFile">$$dataDir$$/PDBProteinSequences/pdb.fsa</globalConstant>
    <globalConstant name="global_NRDBOutputFile_shortDefline">$$dataDir$$/NRDB/nrdb-short-defline.fsa</globalConstant>
    <globalConstant name="global_NRDBOutputFile">$$dataDir$$/NRDB/nr</globalConstant>

    <constant name="dataDir">global</constant>

    <step name="initClusterHomeDir"
          stepClass="ApiCommonWorkflow::Main::WorkflowSteps::InitClusterHomeDir">
    </step>

    <step name="makeDataDir" stepClass="ApiCommonWorkflow::Main::WorkflowSteps::MakeDataDir">
      <paramValue name="dataDir">$$$dataDir$</paramValue>
    </step>

    <step name="initUserGroupProject" 
          stepClass="ApiCommonWorkflow::Main::WorkflowSteps::InitUserGroupProject">
      <depends name="makeDataDir"/>
    </step>

  <subgraph name="GOResource" xmlFile="loadResource.xml">
    <paramValue name="resourceName">GO</paramValue>
    <paramValue name="resourceXmlFileName">$$globalResourceXmlFile$$</paramValue>
    <paramValue name="dataDir">$$dataDir$$/GO</paramValue>
    <depends name="initUserGroupProject"/>
  </subgraph>

  <subgraph name="enzymeDBResource" xmlFile="loadResource.xml">
    <paramValue name="resourceName">enzymeDB</paramValue>
    <paramValue name="resourceXmlFileName">$$globalResourceXmlFile$$</paramValue>
    <paramValue name="dataDir">$$dataDir$$/enzymeDB</paramValue>
    <depends name="initUserGroupProject"/>
  </subgraph>

  <subgraph name="PDBProteinSequencesResource" xmlFile="loadResource.xml">
    <paramValue name="resourceName">PDBProteinSequences</paramValue>
    <paramValue name="resourceXmlFileName">$$globalResourceXmlFile$$</paramValue>
    <paramValue name="dataDir">$$dataDir$$/PDBProteinSequences</paramValue>
    <depends name="initUserGroupProject"/>
  </subgraph>

  <subgraph name="taxonomyResource" xmlFile="loadResource.xml">
    <paramValue name="resourceName">taxonomy</paramValue>
    <paramValue name="resourceXmlFileName">$$globalResourceXmlFile$$</paramValue>
    <paramValue name="dataDir">$$dataDir$$/taxonomy</paramValue>
    <depends name="initUserGroupProject"/>
  </subgraph>

  <subgraph name="updatePDBTaxonResource" xmlFile="loadResource.xml">
    <paramValue name="resourceName">FetchPDBidx</paramValue>
    <paramValue name="resourceXmlFileName">$$globalResourceXmlFile$$</paramValue>
    <paramValue name="dataDir">$$dataDir$$/FetchPDBidx</paramValue>
    <depends name="initUserGroupProject"/>
    <depends name="PDBProteinSequencesResource"/>
    <depends name="taxonomyResource"/>
  </subgraph>


  <subgraph name="SOResource" xmlFile="loadResource.xml">
    <paramValue name="resourceName">SO</paramValue>
    <paramValue name="resourceXmlFileName">$$globalResourceXmlFile$$</paramValue>
    <paramValue name="dataDir">$$dataDir$$/SO</paramValue>
    <depends name="initUserGroupProject"/>
  </subgraph>

  <subgraph name="isolatesResource" xmlFile="$$isolatesResourceReference$$">
    <paramValue name="commonResourceXmlFile">$$commonResourceXmlFilee$$</paramValue>
    <paramValue name="parentDataDir"></paramValue>
    <depends name="initUserGroupProject"/>
  </subgraph>

  <subgraph name="isolateVocabularyResource" xmlFile="loadResource.xml">
    <paramValue name="resourceName">isolateVocabulary</paramValue>
    <paramValue name="resourceXmlFileName">$$globalResourceXmlFile$$</paramValue>
    <paramValue name="dataDir">$$dataDir$$/isolateVocabulary</paramValue>
    <depends name="initUserGroupProject"/>
    <depends name="plasmodiumIsolatesResource"/>
  </subgraph>

  <subgraph name="isolateVocabularyUpdateIsolationSourceResource" xmlFile="loadResource.xml">
    <paramValue name="resourceName">isolateVocabularyUpdate_isolation_source</paramValue>
    <paramValue name="resourceXmlFileName">$$commonResourceXmlFile$$</paramValue>
    <paramValue name="dataDir">$$dataDir$$/isolateVocabularyUpdate_isolation_source</paramValue>
    <depends name="initUserGroupProject"/>
    <depends name="isolateVocabularyResource"/>
  </subgraph>

  <subgraph name="isolateVocabularyUpdateSpecificHostResource" xmlFile="loadResource.xml">
    <paramValue name="resourceName">isolateVocabularyUpdate_specific_host</paramValue>
    <paramValue name="resourceXmlFileName">$$commonResourceXmlFile$$</paramValue>
    <paramValue name="dataDir">$$dataDir$$/isolateVocabularyUpdate_specific_host</paramValue>
    <depends name="initUserGroupProject"/>
    <depends name="isolateVocabularyResource"/>
  </subgraph>

  <subgraph name="isolateVocabularyUpdateGeographicLocationResource" xmlFile="loadResource.xml">
    <paramValue name="resourceName">isolateVocabularyUpdate_geographic_location</paramValue>
    <paramValue name="resourceXmlFileName">$$commonResourceXmlFile$$</paramValue>
    <paramValue name="dataDir">$$dataDir$$/isolateVocabularyUpdate_geographic_location</paramValue>
    <depends name="initUserGroupProject"/>
    <depends name="isolateVocabularyResource"/>
  </subgraph>

  <subgraph name="isolateVocabularyUpdateProductResource" xmlFile="loadResource.xml">
    <paramValue name="resourceName">isolateVocabularyUpdate_product</paramValue>
    <paramValue name="resourceXmlFileName">$$commonResourceXmlFile$$</paramValue>
    <paramValue name="dataDir">$$dataDir$$/isolateVocabularyUpdate_product</paramValue>
    <depends name="initUserGroupProject"/>
    <depends name="isolateVocabularyResource"/>
  </subgraph>

  <subgraph name="MGEDOntologyTermTypesResource" xmlFile="loadResource.xml">
    <paramValue name="resourceName">Mged_Ontology_Term_Types</paramValue>
    <paramValue name="resourceXmlFileName">$$globalResourceXmlFile$$</paramValue>
    <paramValue name="dataDir">$$dataDir$$/Mged_Ontology_Term_Types</paramValue>
    <depends name="initUserGroupProject"/>
  </subgraph>

  <subgraph name="MGEDOntologyRelationshipTypesResource" xmlFile="loadResource.xml">
    <paramValue name="resourceName">Mged_Ontology_Relationship_Types</paramValue>
    <paramValue name="resourceXmlFileName">$$globalResourceXmlFile$$</paramValue>
    <paramValue name="dataDir">$$dataDir$$/Mged_Ontology_Relationship_Types</paramValue>
    <depends name="initUserGroupProject"/>
    <depends name="MGEDOntologyTermTypesResource"/>
  </subgraph>

  <subgraph name="MGEDOntologyResource" xmlFile="loadResource.xml">
    <paramValue name="resourceName">MGED_Ontology</paramValue>
    <paramValue name="resourceXmlFileName">$$globalResourceXmlFile$$</paramValue>
    <paramValue name="dataDir">$$dataDir$$/Mged_Ontology</paramValue>
    <depends name="initUserGroupProject"/>
    <depends name="MGEDOntologyRelationshipTypesResource"/>
  </subgraph>

  <subgraph name="MGEDOntologyEntryResource" xmlFile="loadResource.xml">
    <paramValue name="resourceName">Mged_Ontology_Entry</paramValue>
    <paramValue name="resourceXmlFileName">$$globalResourceXmlFile$$</paramValue>
    <paramValue name="dataDir">$$dataDir$$/Mged_Ontology_Entry</paramValue>
    <depends name="initUserGroupProject"/>
    <depends name="MGEDOntologyResource"/>
  </subgraph>

  <subgraph name="GOEvidenceCodesResource" xmlFile="loadResource.xml">
    <paramValue name="resourceName">GO_evidence_codes</paramValue>
    <paramValue name="resourceXmlFileName">$$globalResourceXmlFile$$</paramValue>
    <paramValue name="dataDir">$$dataDir$$/GO_evidence_codes</paramValue>
    <depends name="initUserGroupProject"/>
  </subgraph>

  <subgraph name="interproscanDataResource" xmlFile="loadResource.xml">
    <paramValue name="resourceName">InterproscanData</paramValue>
    <paramValue name="resourceXmlFileName">$$globalResourceXmlFile$$</paramValue>
    <paramValue name="dataDir">$$dataDir$$/InterproscanData</paramValue>
    <depends name="initUserGroupProject"/>
  </subgraph>

  <subgraph name="NRDBResource" xmlFile="loadResource.xml">
    <paramValue name="resourceName">NRDB</paramValue>
    <paramValue name="resourceXmlFileName">$$globalResourceXmlFile$$</paramValue>
    <paramValue name="dataDir">$$dataDir$$/NRDB</paramValue>
    <depends name="initUserGroupProject"/>
  </subgraph>


  <subgraph name="blatAlignmentQualityResource" xmlFile="loadResource.xml">
    <paramValue name="resourceName">blatAlignmentQuality</paramValue>
    <paramValue name="resourceXmlFileName">$$globalResourceXmlFile$$</paramValue>
    <paramValue name="dataDir">$$dataDir$$/blatAlignmentQuality</paramValue>
    <depends name="initUserGroupProject"/>
  </subgraph>

    <step name="mirrorToCluster" stepClass="ApiCommonWorkflow::Main::WorkflowSteps::MirrorToComputeCluster">
      <paramValue name="fileOrDirToMirror">$$dataDir$$</paramValue>
      <depends name="initClusterHomeDir"/>
      <depends name="NRDBResource"/>
      <depends name="PDBProteinSequencesResource"/>
    </step>

</workflowGraph>
