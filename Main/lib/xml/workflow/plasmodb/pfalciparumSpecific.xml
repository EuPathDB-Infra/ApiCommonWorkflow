<workflowGraph name="pfalciparumSpecificAnalysis">
  <param name="parentDataDir"/>
  <param name="organismName"/>
  <param name="organismFullName"/>
  <param name="genomeExtDbRlsSpec"/>
  <param name="suSnpExtDbRlsSpec"/>
  <param name="broadSnpExtDbRlsSpec"/>
  <param name="winzelerSnpExtDbRlsSpec"/>
  <param name="sangerItGhanaSnpExtDbRlsSpec"/>
  <param name="sangerReichenowiSnpExtDbRlsSpec"/>
  <param name="combinedSnpExtDbRlsSpec"/>
  <param name="sageTagExtDbRlsSpec"/>
  <param name="oligoExtDbRlsSpec"/>
  <param name="genbankIsolateExtDbRlsSpec"/>
  <param name="stunnenberChipProbeFile"/>
  <param name="stunnenberChipExtDbRlsSpec"/>
  <param name="stunnenberChipInputDir"/>
  <param name="scherfChipProbeFile"/>
  <param name="scherfChipExtDbRlsSpec"/>
  <param name="scherfChipInputDir"/>
  <param name="vossChipProbeFile"/>
  <param name="vossChipExtDbRlsSpec"/>
  <param name="vossChipInputDir"/>
  <param name="organismResourceXmlFile"/>


  <constant name="dataDir">$$parentDataDir$$/$$organismName$$Specific</constant>
  <constant name="genomicSeqsFile">$$parentDataDir$$/$$organismName$$LoadGenome/genomicSeqs.fsa</constant>
  <constant name="organismResourceXmlFile">global</constant>

  <step name="makeDataDir" stepClass="ApiCommonWorkflow::Main::WorkflowSteps::MakeDataDir">
    <paramValue name="dataDir">$$dataDir$$</paramValue>
  </step>

    <step name="makeDownloadSiteDataDir" stepClass="ApiCommonWorkflow::Main::WorkflowSteps::MakeApiSiteFilesDir">
      <paramValue name="apiSiteFilesDir">$$projectName$$/release-$$projectVersion$$/$$organismName$$</paramValue>
    </step>

    <subgraph name="mapIsolatesToGenome" xmlFile="pfalciparumMapIsolatesToGenome.xml">
      <paramValue name="parentDataDir"></paramValue>
      <paramValue name="organismName">$$organismName$$</paramValue>
      <paramValue name="genomeExtDbRlsSpec">$$genomeExtDbRlsSpec$$</paramValue>
      <paramValue name="genbankIsolateExtDbRlsSpec">$$genbankIsolateExtDbRlsSpec$$</paramValue>
      <paramValue name="genomicSeqsFile">$$genomicSeqsFile$$</paramValue>
      <depends name="makeDataDir"/>
      <dependsGlobal name="isolatesResource"/>
    </subgraph>

    <subgraph name="SNPs" xmlFile="pfalciparumSNPs.xml">
      <paramValue name="parentDataDir"></paramValue>
      <paramValue name="organismName"></paramValue>
      <paramValue name="organismFullName"></paramValue>
      <paramValue name="genomeExtDbRlsSpec"></paramValue>
      <paramValue name="suSnpExtDbRlsSpec"></paramValue>
      <paramValue name="broadSnpExtDbRlsSpec"></paramValue>
      <paramValue name="winzelerSnpExtDbRlsSpec"></paramValue>
      <paramValue name="sangerItGhanaSnpExtDbRlsSpec"></paramValue
      <paramValue name="sangerReichenowiSnpExtDbRlsSpec"></paramValue>
      <paramValue name="combinedSnpExtDbRlsSpec"></paramValue>
      <paramValue name="organismResourceXmlFile">plasmodb/pfalciparum.xml</paramValue>
      <paramValue name="genomicSeqsFile">$$genomicSeqsFile$$</paramValue>
      <depends name="makeDataDir"/>
    </subgraph>

    <subgraph name="ChIP-chips" xmlFile="pfalciparumChIP.xml">
      <paramValue name="parentDataDir"></paramValue>
      <paramValue name="genomeExtDbRlsSpec"></paramValue>
      <paramValue name="stunnenberChipProbeFile"></paramValue
      <paramValue name="stunnenberChipExtDbRlsSpec"></paramValue>
      <paramValue name="stunnenberChipExtDbRlsSpec"></paramValue>
      <paramValue name="scherfChipProbeFile"></paramValue>
      <paramValue name="scherfChipExtDbRlsSpec"></paramValue>
      <paramValue name="scherfChipInputDir"></paramValue>
      <paramValue name="vossChipProbeFile"></paramValue>
      <paramValue name="vossChipExtDbRlsSpec"></paramValue>
      <paramValue name="vossChipInputDir"></paramValue>
      <paramValue name="organismResourceXmlFile">plasmodb/pfalciparum.xml</paramValue>
      <paramValue name="genomicSeqsFile">$$genomicSeqsFile$$</paramValue>
      <depends name="makeDataDir"/>
    </subgraph>

  <subgraph name="mapSageTags" xmlFile="mapSageTags.xml">
    <paramValue name="genomicSeqsFile">$$genomicSeqsFile$$</paramValue>
    <paramValue name="parentDataDir">$$dataDir$$</paramValue>
    <paramValue name="sageTagExtDbRlsSpec">$$sageTagExtDbRlsSpec$$</paramValue>
    <paramValue name="studyName">Transcriptional profile of P.falciparum by Serial analysis of gene expression</paramValue>
    <paramValue name="nickName">mapSageTags</paramValue> 
    <paramValue name="paramValue">25372</paramValue>    
    <paramValue name="calFreq">true</paramValue>
    <depends name="makeDataDir"/>
  </subgraph>


  <subgraph name="mapOligos" xmlFile="mapOligos.xml">
    <paramValue name="parentDataDir">$$dataDir$$</paramValue>
    <paramValue name="oligoExtDbRlsSpec">$$oligoExtDbRlsSpec$$</paramValue>
    <paramValue name="genomeExtDbRlsSpec">$$genomeExtDbRlsSpec$$</paramValue>
    <paramValue name="genomicSeqsFile">$$genomicSeqsFile$$</paramValue>
    <paramValue name="idRegex">(\\S+)\\s+length</paramValue>
    <paramValue name="loadOptions">--hspMatchLength 64 --hspPctIdent 95 --hspsLimit 1</paramValue>
    <depends name="makeDataDir"/>
  </subgraph>

  <step name="loadAnticodons" stepClass="ApiCommonWorkflow::Main::WorkflowSteps::LoadAnticodons">
     <paramValue name="inputFileRelativeToManualDeliveryDir">anticodons/PfAntiCodons</paramValue>
     <paramValue name="genomeExtDbRlsSpec">$$genomeExtDbRlsSpec$$</paramValue>
  </step>


 
</workflowGraph>
