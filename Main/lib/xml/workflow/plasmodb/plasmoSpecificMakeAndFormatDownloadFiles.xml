<workflowGraph name="plasmoSpecificMakeAndFormatDownloadFiles">

    <param name="downloadSiteDataDir"/>
    <param name="projectName"/>
    <param name="projectVersion"/>
    <param name="webServicesDataDir"/>
    <param name="genbankIsolateExtDbRlsSpec"/>
    <param name="barcodeIsolateExtDbRlsSpec"/>

    <step name="makeGenbankIsolateDownloadFile" stepClass="ApiCommonWorkflow::Main::WorkflowSteps::MakeIsolateDownloadFile">
      <paramValue name="outputFile">$$downloadSiteDataDir$$/PlasmodiumIsolates_$$projectName$$-$$projectVersion$$.fasta</paramValue>
      <paramValue name="isolateExtDbRlsSpec">$$genbankIsolateExtDbRlsSpec$$</paramValue>
    </step>

    <step name="formatGenbankIsolateDownloadFile" stepClass="ApiCommonWorkflow::Main::WorkflowSteps::FormatDownloadFile">
      <paramValue name="inputFile">$$downloadSiteDataDir$$/PlasmodiumIsolates_$$projectName$$-$$projectVersion$$.fasta</paramValue>
      <paramValue name="outputDir">$$webServicesDataDir$$/blast</paramValue>
      <paramValue name="formattedFileName">PlasmodiumIsolates</paramValue>
      <paramValue name="args">-n -t release-$$projectVersion$$/PlasmodiumIsolates</paramValue>
    <depends name="makeGenbankIsolateDownloadFile"/>
    </step>

    <step name="makeBarcodeIsolateDownloadFile" stepClass="ApiCommonWorkflow::Main::WorkflowSteps::MakeIsolateDownloadFile">
      <paramValue name="outputFile">$$downloadSiteDataDir$$/PlasmodiumBarcodeIsolates_$$projectName$$-$$projectVersion$$.fasta</paramValue>
      <paramValue name="isolateExtDbRlsSpec">$$barcodeIsolateExtDbRlsSpec$$</paramValue>
    </step>

    <step name="formatBarcodeIsolateDownloadFile" stepClass="ApiCommonWorkflow::Main::WorkflowSteps::FormatDownloadFile">
      <paramValue name="inputFile">$$downloadSiteDataDir$$/PlasmodiumBarcodeIsolates_$$projectName$$-$$projectVersion$$.fasta</paramValue>
      <paramValue name="outputDir">$$webServicesDataDir$$/blast</paramValue>
      <paramValue name="formattedFileName">PlasmodiumBarcodeIsolates</paramValue>
      <paramValue name="args">-n -t release-$$projectVersion$$/PlasmodiumBarcodeIsolates</paramValue>
    <depends name="makeBarcodeIsolateDownloadFile"/>
    </step>


</workflowGraph>
