<workflowGraph name="copyAndFormatDownloadFilesFromManualDelivery">
    <param name="parentDataDir"/>
    <param name="relativeManualDeliveryDir"/>
    <param name="relativeDownloadSiteDir"/>
    <param name="relativeWebServiceDir"/>
    <param name="inputFileNameRegex"/>
    <param name="projectName"/>
    <param name="formatDownloadFile"/>
    <param name="argsOfFormatingDownloadFile"/>
    <param name="formattedOutputName"/>

    <constant name="dataDir">$$parentDataDir$$</constant>
    <step name="makeDataDir" stepClass="ReFlow::StepClasses::MakeDataDir">
      <paramValue name="dataDir">$$dataDir$$</paramValue>
    </step>

    <step name="copyDownloadFilesFromManualDelivery" stepClass="ApiCommonWorkflow::Main::WorkflowSteps::CopyDownloadFilesFromManualDelivery">
      <paramValue name="projectName">$$projectName$$</paramValue>
      <paramValue name="relativeManualDeliveryDir">$$relativeManualDeliveryDir$$</paramValue>
      <paramValue name="relativeDownloadSiteDir">$$relativeDownloadSiteDir$$</paramValue>
      <paramValue name="inputFileNameRegex">$$inputFileNameRegex$$</paramValue>
    </step>

    <step name="formatDownloadFile" stepClass="ApiCommonWorkflow::Main::WorkflowSteps::FormatDownloadFile" includeIf="$$formatDownloadFile$$">
      <paramValue name="inputFile">$$relativeDownloadSiteDir$$/*.$$inputFileNameRegex$$</paramValue>
      <paramValue name="outputDir">$$relativeWebServiceDir$$</paramValue>
      <paramValue name="formattedFileName">$$formattedOutputName$$</paramValue>
      <paramValue name="args">$$argsOfFormatingDownloadFile$$</paramValue>
      <depends name="copyDownloadFilesFromManualDelivery"/>
    </step>


</workflowGraph>
