<workflowGraph name="">
  <param name="parentDataDir"/>
  <param name="inputGeneModelFile"/>
  <param name="outputDir"/>
  <param name="sampleName"/>
  <param name="isStrandSpecific"/>



    <!-- outputs basename.min and basename.max -->
    <step name="makeIntensityFiles" stepClass="ApiCommonWorkflow::Main::WorkflowSteps::SsaMakeIntensityFile">
      <paramValue name="inputSortedFile">$$parentDataDir$$/master/mainresult/RUM_Unique.sorted,$$parentDataDir$$/master/mainresult/RUM_NU.sorted</paramValue>
      <paramValue name="inputGeneModelFile">$$inputGeneModelFile$$</paramValue>
      <paramValue name="outputIntensityFileBasename">$$outputDir$$/$$sampleName$$.intensity</paramValue>
    </step>

    <step name="generateMappingStatsFile" stepClass="ApiCommonWorkflow::Main::WorkflowSteps::GenerateMappingStatsFile">
      <paramValue name="uniqueFile">$$parentDataDir$$/master/mainresult/RUM_Unique.sorted</paramValue>
      <paramValue name="nonUniqueFile">$$parentDataDir$$/master/mainresult/RUM_NU.sorted</paramValue>
      <paramValue name="outputFile">$$outputDir$$/$$sampleName$$.mappingStats</paramValue>
    </step>

    <step name="generateCountFile" stepClass="ApiCommonWorkflow::Main::WorkflowSteps::GenerateCountFile">
      <paramValue name="uniqueFile">$$parentDataDir$$/master/mainresult/RUM_Unique.sorted</paramValue>
      <paramValue name="nonUniqueFile">$$parentDataDir$$/master/mainresult/RUM_NU.sorted</paramValue>
      <paramValue name="geneAnnotationFile">$$inputGeneModelFile$$</paramValue>
      <paramValue name="outputFile">$$outputDir$$/$$sampleName$$.count</paramValue>
    </step>



<!-- STRAND SPECIFIC -->
    <!-- outputs basename.min and basename.max -->
    <step name="makeIntensityFilesMinus" stepClass="ApiCommonWorkflow::Main::WorkflowSteps::SsaMakeIntensityFile" includeIf="isStrandSpecific">
      <paramValue name="inputSortedFile">$$parentDataDir$$/master/mainresult/RUM_Unique.sorted.minus,$$parentDataDir$$/master/mainresult/RUM_NU.sorted.minus</paramValue>
      <paramValue name="inputGeneModelFile">$$inputGeneModelFile$$</paramValue>
      <paramValue name="outputIntensityFileBasename">$$outputDir$$/$$sampleName$$.minus.intensity</paramValue>
    </step>

    <step name="generateMappingStatsFileMinus" stepClass="ApiCommonWorkflow::Main::WorkflowSteps::GenerateMappingStatsFile" includeIf="isStrandSpecific">
      <paramValue name="uniqueFile">$$parentDataDir$$/master/mainresult/RUM_Unique.sorted.minus</paramValue>
      <paramValue name="nonUniqueFile">$$parentDataDir$$/master/mainresult/RUM_NU.sorted.minus</paramValue>
      <paramValue name="outputFile">$$outputDir$$/$$sampleName$$.minus.mappingStats</paramValue>
    </step>

    <step name="generateCountFileMinus" stepClass="ApiCommonWorkflow::Main::WorkflowSteps::GenerateCountFile" includeIf="isStrandSpecific">
      <paramValue name="uniqueFile">$$parentDataDir$$/master/mainresult/RUM_Unique.sorted.minus</paramValue>
      <paramValue name="nonUniqueFile">$$parentDataDir$$/master/mainresult/RUM_NU.sorted.minus</paramValue>
      <paramValue name="geneAnnotationFile">$$inputGeneModelFile$$</paramValue>
      <paramValue name="outputFile">$$outputDir$$/$$sampleName$$.minus.count</paramValue>
    </step>



    <!-- outputs basename.min and basename.max -->
    <step name="makeIntensityFilesPlus" stepClass="ApiCommonWorkflow::Main::WorkflowSteps::SsaMakeIntensityFile" includeIf="isStrandSpecific">
      <paramValue name="inputSortedFile">$$parentDataDir$$/master/mainresult/RUM_Unique.sorted.plus,$$parentDataDir$$/master/mainresult/RUM_NU.sorted.plus</paramValue>
      <paramValue name="inputGeneModelFile">$$inputGeneModelFile$$</paramValue>
      <paramValue name="outputIntensityFileBasename">$$outputDir$$/$$sampleName$$.plus.intensity</paramValue>
    </step>

    <step name="generateMappingStatsFilePlus" stepClass="ApiCommonWorkflow::Main::WorkflowSteps::GenerateMappingStatsFile" includeIf="isStrandSpecific">
      <paramValue name="uniqueFile">$$parentDataDir$$/master/mainresult/RUM_Unique.sorted.plus</paramValue>
      <paramValue name="nonUniqueFile">$$parentDataDir$$/master/mainresult/RUM_NU.sorted.plus</paramValue>
      <paramValue name="outputFile">$$outputDir$$/$$sampleName$$.plus.mappingStats</paramValue>
    </step>

    <step name="generateCountFilePlus" stepClass="ApiCommonWorkflow::Main::WorkflowSteps::GenerateCountFile" includeIf="isStrandSpecific">
      <paramValue name="uniqueFile">$$parentDataDir$$/master/mainresult/RUM_Unique.sorted.plus</paramValue>
      <paramValue name="nonUniqueFile">$$parentDataDir$$/master/mainresult/RUM_NU.sorted.plus</paramValue>
      <paramValue name="geneAnnotationFile">$$inputGeneModelFile$$</paramValue>
      <paramValue name="outputFile">$$outputDir$$/$$sampleName$$.plus.count</paramValue>
    </step>



</workflowGraph>
